local StarLight = {}

local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")
local ContentProvider = game:GetService("ContentProvider")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local GuiService = game:GetService("GuiService")
local CoreGui = game:GetService("CoreGui")
local StarterGui = game:GetService("StarterGui")
local Lighting = game:GetService("Lighting")

local isStudio = RunService:IsStudio()
local LocalPlayer = Players.LocalPlayer
local Platform = UserInputService:GetPlatform()
local Camera = workspace.CurrentCamera

StarLight.IsMobile = (Platform == Enum.Platform.IOS or Platform == Enum.Platform.Android)
StarLight.IsTouch = UserInputService.TouchEnabled
StarLight.Platform = Platform

local assets = {
    interFont = "rbxassetid://12187365364",
    userInfoBlurred = "rbxassetid://18824089198",
    toggleBackground = "rbxassetid://18772190202",
    togglerHead = "rbxassetid://18772309008",
    buttonImage = "rbxassetid://10709791437",
    searchIcon = "rbxassetid://86737463322606",
    contextMenuBackground = "rbxassetid://18767849817",
    dropdownArrow = "rbxassetid://18865373378",
    sliderBar = "rbxassetid://18772615246",
    sliderHead = "rbxassetid://18772834246",
    moveIcon = "rbxassetid://10734900011"
}

local function Tween(instance, tweenInfo, properties)
    return TweenService:Create(instance, tweenInfo, properties)
end

local function AssertType(value, expectedType, paramName)
    if typeof(value) ~= expectedType then
        error(string.format("Invalid type for %s: expected %s, got %s", paramName, expectedType, typeof(value)), 3)
    end
end

local function ProtectGui(gui)
    if syn and syn.protect_gui then
        syn.protect_gui(gui)
    elseif gethui and gethui() then
        gui.Parent = gethui()
    elseif not isStudio then
        gui.Parent = CoreGui
    else
        gui.Parent = LocalPlayer.PlayerGui
    end
end

local function DeepCopy(original)
    if typeof(original) == 'table' then
        local copy = {}
        for k, v in pairs(original) do
            copy[DeepCopy(k)] = DeepCopy(v)
        end
        return copy
    else
        return original
    end
end

local ContextMenu = {}
ContextMenu.__index = ContextMenu

function ContextMenu.new()
    local self = setmetatable({}, ContextMenu)
    local menu = Instance.new("Frame")
    menu.Name = "ContextMenu"
    menu.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    menu.BackgroundTransparency = 0.05
    menu.BorderColor3 = Color3.fromRGB(0, 0, 0)
    menu.BorderSizePixel = 0
    menu.Position = UDim2.fromScale(0, 0)
    menu.Size = UDim2.fromOffset(200, 0)
    menu.AutomaticSize = Enum.AutomaticSize.Y
    menu.Visible = false
    menu.ZIndex = 1000
    local menuUIStroke = Instance.new("UIStroke")
    menuUIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    menuUIStroke.Color = Color3.fromRGB(255, 255, 255)
    menuUIStroke.Transparency = 0.9
    menuUIStroke.Parent = menu
    local menuUICorner = Instance.new("UICorner")
    menuUICorner.CornerRadius = UDim.new(0, 10)
    menuUICorner.Parent = menu
    local menuUIListLayout = Instance.new("UIListLayout")
    menuUIListLayout.Padding = UDim.new(0, 2)
    menuUIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    menuUIListLayout.Parent = menu
    local menuUIPadding = Instance.new("UIPadding")
    menuUIPadding.PaddingBottom = UDim.new(0, 8)
    menuUIPadding.PaddingLeft = UDim.new(0, 8)
    menuUIPadding.PaddingRight = UDim.new(0, 8)
    menuUIPadding.PaddingTop = UDim.new(0, 8)
    menuUIPadding.Parent = menu
    menu.Parent = CoreGui
    self.Frame = menu
    self.Items = {}
    self.IsOpen = false
    menu.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            self:Hide()
        end
    end)
    return self
end

function ContextMenu:AddItem(name, callback)
    local item = Instance.new("TextButton")
    item.Name = "MenuItem_" .. name
    item.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
    item.Text = name
    item.TextColor3 = Color3.fromRGB(255, 255, 255)
    item.TextSize = 13
    item.TextTransparency = 0.5
    item.TextXAlignment = Enum.TextXAlignment.Left
    item.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    item.BackgroundTransparency = 1
    item.BorderSizePixel = 0
    item.AutomaticSize = Enum.AutomaticSize.Y
    item.Size = UDim2.new(1, 0, 0, 25)
    local padding = Instance.new("UIPadding")
    padding.PaddingLeft = UDim.new(0, 10)
    padding.PaddingRight = UDim.new(0, 10)
    padding.Parent = item
    item.MouseButton1Click:Connect(function()
        if callback then callback() end
        self:Hide()
    end)
    item.MouseEnter:Connect(function()
        Tween(item, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {
            BackgroundTransparency = 0.9,
            TextTransparency = 0.2
        }):Play()
    end)
    item.MouseLeave:Connect(function()
        Tween(item, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {
            BackgroundTransparency = 1,
            TextTransparency = 0.5
        }):Play()
    end)
    item.Parent = self.Frame
    table.insert(self.Items, item)
    return item
end

function ContextMenu:AddSeparator()
    local separator = Instance.new("Frame")
    separator.Name = "Separator"
    separator.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    separator.BackgroundTransparency = 0.95
    separator.BorderSizePixel = 0
    separator.Size = UDim2.new(1, 0, 0, 1)
    separator.LayoutOrder = -1
    separator.Parent = self.Frame
    return separator
end

function ContextMenu:Show(position)
    self.Frame.Position = UDim2.fromOffset(position.X, position.Y)
    self.Frame.Visible = true
    self.IsOpen = true
    self.Frame.Size = UDim2.fromOffset(200, 0)
    Tween(self.Frame, TweenInfo.new(0.2, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), {
        Size = UDim2.fromOffset(200, self.Frame.AbsoluteSize.Y)
    }):Play()
end

function ContextMenu:Hide()
    if not self.IsOpen then return end
    local tween = Tween(self.Frame, TweenInfo.new(0.15, Enum.EasingStyle.Quint, Enum.EasingDirection.In), {
        Size = UDim2.fromOffset(200, 0)
    })
    tween:Play()
    tween.Completed:Connect(function()
        self.Frame.Visible = false
    end)
    self.IsOpen = false
end

function ContextMenu:Destroy()
    self.Frame:Destroy()
    self.Items = {}
end

local KeyPicker = {}
KeyPicker.__index = KeyPicker

function KeyPicker.new(settings)
    local self = setmetatable({}, KeyPicker)
    self.Name = settings.Name or "Keybind"
    self.Default = settings.Default
    self.Mode = settings.Mode or "Toggle"
    self.Callback = settings.Callback or function() end
    self.onBinded = settings.onBinded or function() end
    self.AllowModifierKeys = settings.AllowModifierKeys ~= false
    self.State = false
    self.Keybind = settings.Default
    self.OldKeybind = self.Keybind
    self.ModeDropdown = nil
    self.BlacklistedKeys = {
        [Enum.KeyCode.Unknown] = true,
        [Enum.KeyCode.W] = true,
        [Enum.KeyCode.A] = true,
        [Enum.KeyCode.S] = true,
        [Enum.KeyCode.D] = true,
    }
    self.Modifiers = {
        [Enum.KeyCode.LeftShift] = "LShift",
        [Enum.KeyCode.RightShift] = "RShift",
        [Enum.KeyCode.LeftControl] = "LCtrl",
        [Enum.KeyCode.RightControl] = "RCtrl",
        [Enum.KeyCode.LeftAlt] = "LAlt",
        [Enum.KeyCode.RightAlt] = "RAlt",
    }
    self.ModeIndicators = {
        ["Toggle"] = "[T]",
        ["Hold"] = "[H]",
        ["Press"] = "[P]",
        ["Always"] = "[A]"
    }
    return self
end

function KeyPicker:ValidateKey(key)
    if self.BlacklistedKeys[key] then return false end
    if key.Name:match("Mouse") then return false end
    if key.Name:match("Button") then return false end
    return true
end

function KeyPicker:GetString()
    if not self.Keybind then return "None" end
    local keyName = self.Keybind.Name
    local mods = {}
    if self.AllowModifierKeys then
        if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then table.insert(mods, "LShift") end
        if UserInputService:IsKeyDown(Enum.KeyCode.RightShift) then table.insert(mods, "RShift") end
        if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then table.insert(mods, "LCtrl") end
        if UserInputService:IsKeyDown(Enum.KeyCode.RightControl) then table.insert(mods, "RCtrl") end
        if UserInputService:IsKeyDown(Enum.KeyCode.LeftAlt) then table.insert(mods, "LAlt") end
        if UserInputService:IsKeyDown(Enum.KeyCode.RightAlt) then table.insert(mods, "RAlt") end
    end
    if #mods > 0 then
        return table.concat(mods, " + ") .. " + " .. keyName
    else
        return keyName
    end
end

function KeyPicker:CreateUI(parent)
    local keybind = Instance.new("Frame")
    keybind.Name = "Keybind"
    keybind.AutomaticSize = Enum.AutomaticSize.Y
    keybind.BackgroundTransparency = 1
    keybind.BorderColor3 = Color3.fromRGB(0, 0, 0)
    keybind.BorderSizePixel = 0
    keybind.Size = UDim2.new(1, 0, 0, 38)
    keybind.Parent = parent
    local keybindName = Instance.new("TextLabel")
    keybindName.Name = "KeybindName"
    keybindName.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
    keybindName.Text = self.Name
    keybindName.RichText = true
    keybindName.TextColor3 = Color3.fromRGB(255, 255, 255)
    keybindName.TextSize = 13
    keybindName.TextTransparency = 0.5
    keybindName.TextTruncate = Enum.TextTruncate.AtEnd
    keybindName.TextXAlignment = Enum.TextXAlignment.Left
    keybindName.TextYAlignment = Enum.TextYAlignment.Top
    keybindName.AnchorPoint = Vector2.new(0, 0.5)
    keybindName.AutomaticSize = Enum.AutomaticSize.XY
    keybindName.BackgroundTransparency = 1
    keybindName.BorderColor3 = Color3.fromRGB(0, 0, 0)
    keybindName.BorderSizePixel = 0
    keybindName.Position = UDim2.fromScale(0, 0.5)
    keybindName.Parent = keybind
    local binderBox = Instance.new("TextBox")
    binderBox.Name = "BinderBox"
    binderBox.CursorPosition = -1
    binderBox.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
    binderBox.PlaceholderText = "..."
    binderBox.Text = self.Default and self.Default.Name or ""
    binderBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    binderBox.TextSize = 12
    binderBox.TextTransparency = 0.4
    binderBox.AnchorPoint = Vector2.new(1, 0.5)
    binderBox.AutomaticSize = Enum.AutomaticSize.X
    binderBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    binderBox.BackgroundTransparency = 0.95
    binderBox.BorderColor3 = Color3.fromRGB(0, 0, 0)
    binderBox.BorderSizePixel = 0
    binderBox.ClipsDescendants = true
    binderBox.LayoutOrder = 1
    binderBox.Position = UDim2.fromScale(1, 0.5)
    binderBox.Size = UDim2.fromOffset(21, 21)
    binderBox.Parent = keybind
    local binderBoxUICorner = Instance.new("UICorner")
    binderBoxUICorner.CornerRadius = UDim.new(0, 4)
    binderBoxUICorner.Parent = binderBox
    local binderBoxUIStroke = Instance.new("UIStroke")
    binderBoxUIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    binderBoxUIStroke.Color = Color3.fromRGB(255, 255, 255)
    binderBoxUIStroke.Transparency = 0.9
    binderBoxUIStroke.Parent = binderBox
    local binderBoxUIPadding = Instance.new("UIPadding")
    binderBoxUIPadding.PaddingLeft = UDim.new(0, 5)
    binderBoxUIPadding.PaddingRight = UDim.new(0, 5)
    binderBoxUIPadding.Parent = binderBox
    local binderBoxUISizeConstraint = Instance.new("UISizeConstraint")
    binderBoxUISizeConstraint.Parent = binderBox
    local contextMenu = ContextMenu.new()
    contextMenu:AddItem("Copy Keybind", function()
        if self.Keybind then
            local keyString = self:GetString()
            if setclipboard then setclipboard(keyString) end
        end
    end)
    contextMenu:AddItem("Unbind", function()
        self:Unbind()
    end)
    contextMenu:AddSeparator()
    for mode, indicator in pairs(self.ModeIndicators) do
        contextMenu:AddItem(string.format("%s %s", indicator, mode), function()
            self:SetMode(mode)
        end)
    end
    local focused = false
    self.Focused = focused
    self.BinderBox = binderBox
    self.KeybindName = keybindName
    binderBox.Focused:Connect(function()
        focused = true
        self.Focused = focused
        binderBox.Text = "..."
    end)
    binderBox.FocusLost:Connect(function()
        focused = false
        self.Focused = focused
        if self.Keybind then
            binderBox.Text = self:GetString()
        else
            binderBox.Text = ""
        end
    end)
    binderBox.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton2 then
            local mousePos = UserInputService:GetMouseLocation()
            contextMenu:Show(mousePos)
        end
    end)
    UserInputService.InputEnded:Connect(function(input, gameProcessed)
        if focused and input.KeyCode ~= Enum.KeyCode.Unknown then
            self:SetKeybind(input.KeyCode)
        elseif not focused and self.Keybind and input.KeyCode == self.Keybind then
            self:HandlePress()
        end
    end)
    self.Frame = keybind
    return keybind
end

function KeyPicker:SetKeybind(key)
    if not self:ValidateKey(key) then return end
    self.OldKeybind = self.Keybind
    self.Keybind = key
    if self.BinderBox then
        self.BinderBox.Text = self:GetString()
        self.BinderBox:ReleaseFocus()
    end
    self.onBinded(key)
end

function KeyPicker:Unbind()
    self.Keybind = nil
    if self.BinderBox then
        self.BinderBox.Text = ""
        self.BinderBox:ReleaseFocus()
    end
end

function KeyPicker:SetMode(mode)
    self.Mode = mode
end

function KeyPicker:HandlePress()
    if self.Mode == "Toggle" then
        self.State = not self.State
        self.Callback(self.State, self.Keybind)
    elseif self.Mode == "Hold" or self.Mode == "Press" then
        self.Callback(true, self.Keybind)
    elseif self.Mode == "Always" then
        self.Callback(true, self.Keybind)
    end
end

function KeyPicker:GetState()
    if self.Mode == "Toggle" then
        return self.State
    elseif self.Mode == "Hold" or self.Mode == "Press" then
        return UserInputService:IsKeyDown(self.Keybind)
    elseif self.Mode == "Always" then
        return true
    end
    return false
end

function StarLight:Window(Settings)
    AssertType(Settings.Title, "string", "Settings.Title")
    local WindowFunctions = {}
    local hasGlobalSetting = false
    local tabs = {}
    local currentTabInstance = nil
    local tabIndex = 0
    Settings.AcrylicBlur = Settings.AcrylicBlur ~= false
    Settings.DragStyle = Settings.DragStyle or 1
    local starlightGui = Instance.new("ScreenGui")
    starlightGui.Name = "StarLight"
    starlightGui.ResetOnSpawn = false
    starlightGui.DisplayOrder = 100
    starlightGui.IgnoreGuiInset = true
    starlightGui.ScreenInsets = Enum.ScreenInsets.None
    starlightGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ProtectGui(starlightGui)
    local notifications = Instance.new("Frame")
    notifications.Name = "Notifications"
    notifications.BackgroundTransparency = 1
    notifications.BorderSizePixel = 0
    notifications.Size = UDim2.fromScale(1, 1)
    notifications.ZIndex = 2
    notifications.Parent = starlightGui
    local notificationsUIListLayout = Instance.new("UIListLayout")
    notificationsUIListLayout.Padding = UDim.new(0, 10)
    notificationsUIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Right
    notificationsUIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    notificationsUIListLayout.VerticalAlignment = Enum.VerticalAlignment.Bottom
    notificationsUIListLayout.Parent = notifications
    local notificationsUIPadding = Instance.new("UIPadding")
    notificationsUIPadding.PaddingBottom = UDim.new(0, 10)
    notificationsUIPadding.PaddingLeft = UDim.new(0, 10)
    notificationsUIPadding.PaddingRight = UDim.new(0, 10)
    notificationsUIPadding.PaddingTop = UDim.new(0, 10)
    notificationsUIPadding.Parent = notifications
    local base = Instance.new("Frame")
    base.Name = "Base"
    base.AnchorPoint = Vector2.new(0.5, 0.5)
    base.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    base.BackgroundTransparency = Settings.AcrylicBlur and 0.05 or 0
    base.BorderSizePixel = 0
    base.Position = UDim2.fromScale(0.5, 0.5)
    base.Size = Settings.Size or UDim2.fromOffset(868, 650)
    local baseUIScale = Instance.new("UIScale")
    baseUIScale.Parent = base
    local baseUICorner = Instance.new("UICorner")
    baseUICorner.CornerRadius = UDim.new(0, 10)
    baseUICorner.Parent = base
    local baseUIStroke = Instance.new("UIStroke")
    baseUIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    baseUIStroke.Color = Color3.fromRGB(255, 255, 255)
    baseUIStroke.Transparency = 0.9
    baseUIStroke.Parent = base
    local sidebar = Instance.new("Frame")
    sidebar.Name = "Sidebar"
    sidebar.BackgroundTransparency = 1
    sidebar.BorderSizePixel = 0
    sidebar.Size = UDim2.fromScale(0.325, 1)
    sidebar.Parent = base
    local divider = Instance.new("Frame")
    divider.Name = "Divider"
    divider.AnchorPoint = Vector2.new(1, 0)
    divider.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    divider.BackgroundTransparency = 0.9
    divider.BorderSizePixel = 0
    divider.Position = UDim2.fromScale(1, 0)
    divider.Size = UDim2.new(0, 1, 1, 0)
    divider.Parent = sidebar
    local windowControls = Instance.new("Frame")
    windowControls.Name = "WindowControls"
    windowControls.BackgroundTransparency = 1
    windowControls.BorderSizePixel = 0
    windowControls.Size = UDim2.new(1, 0, 0, 31)
    windowControls.Parent = sidebar
    local controls = Instance.new("Frame")
    controls.Name = "Controls"
    controls.BackgroundTransparency = 1
    controls.BorderSizePixel = 0
    controls.Size = UDim2.fromScale(1, 1)
    controls.Parent = windowControls
    local controlsUIListLayout = Instance.new("UIListLayout")
    controlsUIListLayout.Padding = UDim.new(0, 5)
    controlsUIListLayout.FillDirection = Enum.FillDirection.Horizontal
    controlsUIListLayout.VerticalAlignment = Enum.VerticalAlignment.Center
    controlsUIListLayout.Parent = controls
    local controlsUIPadding = Instance.new("UIPadding")
    controlsUIPadding.PaddingLeft = UDim.new(0, 11)
    controlsUIPadding.Parent = controls
    local exit = Instance.new("TextButton")
    exit.Name = "Exit"
    exit.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json")
    exit.Text = ""
    exit.AutoButtonColor = false
    exit.BackgroundColor3 = Color3.fromRGB(250, 93, 86)
    exit.BorderSizePixel = 0
    exit.Size = UDim2.fromOffset(8, 8)
    local exitUICorner = Instance.new("UICorner")
    exitUIC.CornerRadius = UDim.new(1, 0)
    exitUICorner.Parent = exit
    exit.Parent = controls
    local minimize = Instance.new("TextButton")
    minimize.Name = "Minimize"
    minimize.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json")
    minimize.Text = ""
    minimize.AutoButtonColor = false
    minimize.BackgroundColor3 = Color3.fromRGB(252, 190, 57)
    minimize.BorderSizePixel = 0
    minimize.LayoutOrder = 1
    minimize.Size = UDim2.fromOffset(8, 8)
    local minimizeUICorner = Instance.new("UICorner")
    minimizeUICorner.CornerRadius = UDim.new(1, 0)
    minimizeUICorner.Parent = minimize
    minimize.Parent = controls
    local maximize = Instance.new("TextButton")
    maximize.Name = "Maximize"
    maximize.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json")
    maximize.Text = ""
    maximize.AutoButtonColor = false
    maximize.BackgroundColor3 = Color3.fromRGB(119, 174, 94)
    maximize.BorderSizePixel = 0
    maximize.LayoutOrder = 1
    maximize.Size = UDim2.fromOffset(8, 8)
    maximize.Active = false
    maximize.Interactable = false
    local maximizeUICorner = Instance.new("UICorner")
    maximizeUICorner.CornerRadius = UDim.new(1, 0)
    maximizeUICorner.Parent = maximize
    maximize.Parent = controls
    if Settings.DisabledWindowControls then
        for _, controlName in ipairs(Settings.DisabledWindowControls) do
            local control = controls:FindFirstChild(controlName)
            if control then
                control.Size = UDim2.fromOffset(7, 7)
                control.BackgroundTransparency = 1
                control.Active = false
                control.Interactable = false
                local stroke = control:FindFirstChild("UIStroke")
                if stroke then
                    stroke.Transparency = 0.9
                else
                    local newStroke = Instance.new("UIStroke")
                    newStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                    newStroke.Color = Color3.fromRGB(255, 255, 255)
                    newStroke.Transparency = 0.9
                    newStroke.Parent = control
                end
            end
        end
    end
    local divider1 = Instance.new("Frame")
    divider1.Name = "Divider"
    divider1.AnchorPoint = Vector2.new(0, 1)
    divider1.BackgroundTransparency = 0.9
    divider1.BorderSizePixel = 0
    divider1.Position = UDim2.fromScale(0, 1)
    divider1.Size = UDim2.new(1, 0, 0, 1)
    divider1.Parent = windowControls
    local information = Instance.new("Frame")
    information.Name = "Information"
    information.BackgroundTransparency = 1
    information.BorderSizePixel = 0
    information.Position = UDim2.fromOffset(0, 31)
    information.Size = UDim2.new(1, 0, 0, 60)
    information.Parent = sidebar
    local divider2 = Instance.new("Frame")
    divider2.Name = "Divider"
    divider2.AnchorPoint = Vector2.new(0, 1)
    divider2.BackgroundTransparency = 0.9
    divider2.BorderSizePixel = 0
    divider2.Position = UDim2.fromScale(0, 1)
    divider2.Size = UDim2.new(1, 0, 0, 1)
    divider2.Parent = information
    local informationHolder = Instance.new("Frame")
    informationHolder.Name = "InformationHolder"
    informationHolder.BackgroundTransparency = 1
    informationHolder.BorderSizePixel = 0
    informationHolder.Size = UDim2.fromScale(1, 1)
    informationHolder.Parent = information
    local informationHolderUIPadding = Instance.new("UIPadding")
    informationHolderUIPadding.PaddingBottom = UDim.new(0, 10)
    informationHolderUIPadding.PaddingLeft = UDim.new(0, 23)
    informationHolderUIPadding.PaddingRight = UDim.new(0, 22)
    informationHolderUIPadding.PaddingTop = UDim.new(0, 10)
    informationHolderUIPadding.Parent = informationHolder
    local globalSettingsButton = Instance.new("ImageButton")
    globalSettingsButton.Name = "GlobalSettingsButton"
    globalSettingsButton.Image = assets.contextMenuBackground
    globalSettingsButton.ImageTransparency = 0.4
    globalSettingsButton.AnchorPoint = Vector2.new(1, 0.5)
    globalSettingsButton.BackgroundTransparency = 1
    globalSettingsButton.BorderSizePixel = 0
    globalSettingsButton.Position = UDim2.fromScale(1, 0.5)
    globalSettingsButton.Size = UDim2.fromOffset(15, 15)
    globalSettingsButton.Parent = informationHolder
    local function ChangeGlobalSettingsButtonState(State)
        if State == "Default" then
            Tween(globalSettingsButton, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {
                ImageTransparency = 0.4
            }):Play()
        elseif State == "Hover" then
            Tween(globalSettingsButton, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {
                ImageTransparency = 0.2
            }):Play()
        end
    end
    globalSettingsButton.MouseEnter:Connect(function()
        ChangeGlobalSettingsButtonState("Hover")
    end)
    globalSettingsButton.MouseLeave:Connect(function()
        ChangeGlobalSettingsButtonState("Default")
    end)
    local titleFrame = Instance.new("Frame")
    titleFrame.Name = "TitleFrame"
    titleFrame.BackgroundTransparency = 1
    titleFrame.BorderSizePixel = 0
    titleFrame.Size = UDim2.fromScale(1, 1)
    titleFrame.Parent = informationHolder
    local title = Instance.new("TextLabel")
    title.Name = "Title"
    title.FontFace = Font.new(assets.interFont, Enum.FontWeight.SemiBold, Enum.FontStyle.Normal)
    title.Text = Settings.Title
    title.RichText = true
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextSize = 20
    title.TextTransparency = 0.2
    title.TextTruncate = Enum.TextTruncate.SplitWord
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.TextYAlignment = Enum.TextYAlignment.Top
    title.AutomaticSize = Enum.AutomaticSize.Y
    title.BackgroundTransparency = 1
    title.BorderSizePixel = 0
    title.Size = UDim2.new(1, -20, 0, 0)
    title.Parent = titleFrame
    local subtitle = Instance.new("TextLabel")
    subtitle.Name = "Subtitle"
    subtitle.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
    subtitle.RichText = true
    subtitle.Text = Settings.Subtitle or ""
    subtitle.TextColor3 = Color3.fromRGB(255, 255, 255)
    subtitle.TextSize = 12
    subtitle.TextTransparency = 0.7
    subtitle.TextTruncate = Enum.TextTruncate.SplitWord
    subtitle.TextXAlignment = Enum.TextXAlignment.Left
    subtitle.TextYAlignment = Enum.TextYAlignment.Top
    subtitle.AutomaticSize = Enum.AutomaticSize.Y
    subtitle.BackgroundTransparency = 1
    subtitle.BorderSizePixel = 0
    subtitle.LayoutOrder = 1
    subtitle.Size = UDim2.new(1, -20, 0, 0)
    subtitle.Parent = titleFrame
    local titleFrameUIListLayout = Instance.new("UIListLayout")
    titleFrameUIListLayout.Padding = UDim.new(0, 3)
    titleFrameUIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    titleFrameUIListLayout.VerticalAlignment = Enum.VerticalAlignment.Center
    titleFrameUIListLayout.Parent = titleFrame
    local sidebarGroup = Instance.new("Frame")
    sidebarGroup.Name = "SidebarGroup"
    sidebarGroup.BackgroundTransparency = 1
    sidebarGroup.BorderSizePixel = 0
    sidebarGroup.Position = UDim2.fromOffset(0, 91)
    sidebarGroup.Size = UDim2.new(1, 0, 1, -91)
    sidebarGroup.Parent = sidebar
    local userInfo = Instance.new("Frame")
    userInfo.Name = "UserInfo"
    userInfo.AnchorPoint = Vector2.new(0, 1)
    userInfo.BackgroundTransparency = 1
    userInfo.BorderSizePixel = 0
    userInfo.Position = UDim2.fromScale(0, 1)
    userInfo.Size = UDim2.new(1, 0, 0, 107)
    userInfo.Parent = sidebarGroup
    local informationGroup = Instance.new("Frame")
    informationGroup.Name = "InformationGroup"
    informationGroup.BackgroundTransparency = 1
    informationGroup.BorderSizePixel = 0
    informationGroup.Size = UDim2.fromScale(1, 1)
    informationGroup.Parent = userInfo
    local informationGroupUIPadding = Instance.new("UIPadding")
    informationGroupUIPadding.PaddingLeft = UDim.new(0, 25)
    informationGroupUIPadding.PaddingBottom = UDim.new(0, 17)
    informationGroupUIPadding.Parent = informationGroup
    local informationGroupUIListLayout = Instance.new("UIListLayout")
    informationGroupUIListLayout.FillDirection = Enum.FillDirection.Horizontal
    informationGroupUIListLayout.VerticalAlignment = Enum.VerticalAlignment.Center
    informationGroupUIListLayout.Parent = informationGroup
    local userId = LocalPlayer.UserId
    local thumbType = Enum.ThumbnailType.AvatarBust
    local thumbSize = Enum.ThumbnailSize.Size48x48
    local headshotImage = Players:GetUserThumbnailAsync(userId, thumbType, thumbSize)
    local headshot = Instance.new("ImageLabel")
    headshot.Name = "Headshot"
    headshot.BackgroundTransparency = 1
    headshot.BorderSizePixel = 0
    headshot.Size = UDim2.fromOffset(32, 32)
    headshot.Image = headshotImage
    local headshotUICorner = Instance.new("UICorner")
    headshotUICorner.CornerRadius = UDim.new(1, 0)
    headshotUICorner.Parent = headshot
    local headshotUIStroke = Instance.new("UIStroke")
    headshotUIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    headshotUIStroke.Color = Color3.fromRGB(255, 255, 255)
    headshotUIStroke.Transparency = 0.9
    headshotUIStroke.Parent = headshot
    headshot.Parent = informationGroup
    local userAndDisplayFrame = Instance.new("Frame")
    userAndDisplayFrame.Name = "UserAndDisplayFrame"
    userAndDisplayFrame.BackgroundTransparency = 1
    userAndDisplayFrame.BorderSizePixel = 0
    userAndDisplayFrame.LayoutOrder = 1
    userAndDisplayFrame.Size = UDim2.new(1, -42, 0, 32)
    userAndDisplayFrame.Parent = informationGroup
    local userAndDisplayFrameUIPadding = Instance.new("UIPadding")
    userAndDisplayFrameUIPadding.PaddingLeft = UDim.new(0, 8)
    userAndDisplayFrameUIPadding.PaddingTop = UDim.new(0, 3)
    userAndDisplayFrameUIPadding.Parent = userAndDisplayFrame
    local userAndDisplayFrameUIListLayout = Instance.new("UIListLayout")
    userAndDisplayFrameUIListLayout.Padding = UDim.new(0, 1)
    userAndDisplayFrameUIListLayout.Parent = userAndDisplayFrame
    local displayName = Instance.new("TextLabel")
    displayName.Name = "DisplayName"
    displayName.FontFace = Font.new(assets.interFont, Enum.FontWeight.SemiBold, Enum.FontStyle.Normal)
    displayName.Text = LocalPlayer.DisplayName
    displayName.TextColor3 = Color3.fromRGB(255, 255, 255)
    displayName.TextSize = 13
    displayName.TextTransparency = 0.2
    displayName.TextTruncate = Enum.TextTruncate.SplitWord
    displayName.TextXAlignment = Enum.TextXAlignment.Left
    displayName.AutomaticSize = Enum.AutomaticSize.XY
    displayName.BackgroundTransparency = 1
    displayName.BorderSizePixel = 0
    displayName.Parent = userAndDisplayFrame
    local username = Instance.new("TextLabel")
    username.Name = "Username"
    username.FontFace = Font.new(assets.interFont, Enum.FontWeight.SemiBold, Enum.FontStyle.Normal)
    username.Text = "@" .. LocalPlayer.Name
    username.TextColor3 = Color3.fromRGB(255, 255, 255)
    username.TextSize = 12
    username.TextTransparency = 0.8
    username.TextTruncate = Enum.TextTruncate.SplitWord
    username.TextXAlignment = Enum.TextXAlignment.Left
    username.AutomaticSize = Enum.AutomaticSize.XY
    username.BackgroundTransparency = 1
    username.BorderSizePixel = 0
    username.LayoutOrder = 1
    username.Parent = userAndDisplayFrame
    local userInfoUIPadding = Instance.new("UIPadding")
    userInfoUIPadding.PaddingLeft = UDim.new(0, 10)
    userInfoUIPadding.PaddingRight = UDim.new(0, 10)
    userInfoUIPadding.Parent = userInfo
    local tabSwitchers = Instance.new("Frame")
    tabSwitchers.Name = "TabSwitchers"
    tabSwitchers.BackgroundTransparency = 1
    tabSwitchers.BorderSizePixel = 0
    tabSwitchers.Size = UDim2.new(1, 0, 1, -107)
    tabSwitchers.Parent = sidebarGroup
    local tabSwitchersScrollingFrame = Instance.new("ScrollingFrame")
    tabSwitchersScrollingFrame.Name = "TabSwitchersScrollingFrame"
    tabSwitchersScrollingFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
    tabSwitchersScrollingFrame.BottomImage = ""
    tabSwitchersScrollingFrame.CanvasSize = UDim2.new()
    tabSwitchersScrollingFrame.ScrollBarImageTransparency = 0.8
    tabSwitchersScrollingFrame.ScrollBarThickness = StarLight.IsMobile and 2 or 1
    tabSwitchersScrollingFrame.TopImage = ""
    tabSwitchersScrollingFrame.BackgroundTransparency = 1
    tabSwitchersScrollingFrame.BorderSizePixel = 0
    tabSwitchersScrollingFrame.Size = UDim2.fromScale(1, 1)
    tabSwitchersScrollingFrame.Parent = tabSwitchers
    local tabSwitchersScrollingFrameUIListLayout = Instance.new("UIListLayout")
    tabSwitchersScrollingFrameUIListLayout.Padding = UDim.new(0, 17)
    tabSwitchersScrollingFrameUIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    tabSwitchersScrollingFrameUIListLayout.Parent = tabSwitchersScrollingFrame
    local tabSwitchersScrollingFrameUIPadding = Instance.new("UIPadding")
    tabSwitchersScrollingFrameUIPadding.PaddingTop = UDim.new(0, 2)
    tabSwitchersScrollingFrameUIPadding.Parent = tabSwitchersScrollingFrame
    local sidebarGroupUIPadding = Instance.new("UIPadding")
    sidebarGroupUIPadding.PaddingLeft = UDim.new(0, 10)
    sidebarGroupUIPadding.PaddingRight = UDim.new(0, 10)
    sidebarGroupUIPadding.PaddingTop = UDim.new(0, 31)
    sidebarGroupUIPadding.Parent = sidebarGroup
    local content = Instance.new("Frame")
    content.Name = "Content"
    content.AnchorPoint = Vector2.new(1, 0)
    content.BackgroundTransparency = 1
    content.BorderSizePixel = 0
    content.Position = UDim2.fromScale(1, 0)
    content.Size = UDim2.fromScale(0.675, 1)
    content.Parent = base
    local topbar = Instance.new("Frame")
    topbar.Name = "Topbar"
    topbar.BackgroundTransparency = 1
    topbar.BorderSizePixel = 0
    topbar.Size = UDim2.new(1, 0, 0, 63)
    topbar.Parent = content
    local divider4 = Instance.new("Frame")
    divider4.Name = "Divider"
    divider4.AnchorPoint = Vector2.new(0, 1)
    divider4.BackgroundTransparency = 0.9
    divider4.BorderSizePixel = 0
    divider4.Position = UDim2.fromScale(0, 1)
    divider4.Size = UDim2.new(1, 0, 0, 1)
    divider4.Parent = topbar
    local elements = Instance.new("Frame")
    elements.Name = "Elements"
    elements.BackgroundTransparency = 1
    elements.BorderSizePixel = 0
    elements.Size = UDim2.fromScale(1, 1)
    elements.Parent = topbar
    local elementsUIPadding = Instance.new("UIPadding")
    elementsUIPadding.PaddingLeft = UDim.new(0, 20)
    elementsUIPadding.PaddingRight = UDim.new(0, 20)
    elementsUIPadding.Parent = elements
    local moveIcon = Instance.new("ImageButton")
    moveIcon.Name = "MoveIcon"
    moveIcon.Image = assets.moveIcon
    moveIcon.ImageTransparency = 0.5
    moveIcon.AnchorPoint = Vector2.new(1, 0.5)
    moveIcon.BackgroundTransparency = 1
    moveIcon.BorderSizePixel = 0
    moveIcon.Position = UDim2.fromScale(1, 0.5)
    moveIcon.Size = UDim2.fromOffset(15, 15)
    moveIcon.Visible = Settings.DragStyle == 1
    moveIcon.Parent = elements
    local interact = Instance.new("TextButton")
    interact.Name = "Interact"
    interact.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json")
    interact.Text = ""
    interact.AnchorPoint = Vector2.new(0.5, 0.5)
    interact.BackgroundTransparency = 1
    interact.BorderSizePixel = 0
    interact.Position = UDim2.fromScale(0.5, 0.5)
    interact.Size = UDim2.fromOffset(30, 30)
    interact.Parent = moveIcon
    local currentTab = Instance.new("TextLabel")
    currentTab.Name = "CurrentTab"
    currentTab.FontFace = Font.new(assets.interFont, Enum.FontWeight.SemiBold, Enum.FontStyle.Normal)
    currentTab.RichText = true
    currentTab.Text = "Tab"
    currentTab.TextColor3 = Color3.fromRGB(255, 255, 255)
    currentTab.TextSize = 15
    currentTab.TextTransparency = 0.5
    currentTab.TextTruncate = Enum.TextTruncate.SplitWord
    currentTab.TextXAlignment = Enum.TextXAlignment.Left
    currentTab.TextYAlignment = Enum.TextYAlignment.Top
    currentTab.AnchorPoint = Vector2.new(0, 0.5)
    currentTab.AutomaticSize = Enum.AutomaticSize.Y
    currentTab.BackgroundTransparency = 1
    currentTab.BorderSizePixel = 0
    currentTab.Position = UDim2.fromScale(0, 0.5)
    currentTab.Size = UDim2.fromScale(0.9, 0)
    currentTab.Parent = elements
    local dragging = false
    local dragInput
    local dragStart
    local startPos
    local function updateDrag(input)
        local delta = input.Position - dragStart
        base.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
    local function onDragStart(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = base.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end
    local function onDragUpdate(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            dragInput = input
        end
    end
    if Settings.DragStyle == 1 then
        interact.InputBegan:Connect(onDragStart)
        interact.InputChanged:Connect(onDragUpdate)
        interact.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                dragging = false
            end
        end)
    elseif Settings.DragStyle == 2 then
        base.InputBegan:Connect(onDragStart)
        base.InputChanged:Connect(onDragUpdate)
        base.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                dragging = false
            end
        end)
    end
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            updateDrag(input)
        end
    end)
    local globalSettings = Instance.new("Frame")
    globalSettings.Name = "GlobalSettings"
    globalSettings.AutomaticSize = Enum.AutomaticSize.XY
    globalSettings.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    globalSettings.BorderSizePixel = 0
    globalSettings.Position = UDim2.fromScale(0.298, 0.104)
    globalSettings.Visible = false
    local globalSettingsUIStroke = Instance.new("UIStroke")
    globalSettingsUIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    globalSettingsUIStroke.Color = Color3.fromRGB(255, 255, 255)
    globalSettingsUIStroke.Transparency = 0.9
    globalSettingsUIStroke.Parent = globalSettings
    local globalSettingsUICorner = Instance.new("UICorner")
    globalSettingsUICorner.CornerRadius = UDim.new(0, 10)
    globalSettingsUICorner.Parent = globalSettings
    globalSettingsUIPadding = Instance.new("UIPadding")
    globalSettingsUIPadding.PaddingBottom = UDim.new(0, 10)
    globalSettingsUIPadding.PaddingTop = UDim.new(0, 10)
    globalSettingsUIPadding.Parent = globalSettings
    globalSettingsUIListLayout = Instance.new("UIListLayout")
    globalSettingsUIListLayout.Padding = UDim.new(0, 5)
    globalSettingsUIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    globalSettingsUIListLayout.Parent = globalSettings
    local globalSettingsUIScale = Instance.new("UIScale")
    globalSettingsUIScale.Scale = 0
    globalSettingsUIScale.Parent = globalSettings
    function WindowFunctions:UpdateTitle(NewTitle)
        title.Text = NewTitle
    end
    function WindowFunctions:UpdateSubtitle(NewSubtitle)
        subtitle.Text = NewSubtitle
    end
    local hoveringSettings = false
    local toggledSettings = false
    local function toggleSettings()
        if not hasGlobalSetting then return end
        toggledSettings = not toggledSettings
        local targetScale = toggledSettings and 1 or 0
        local tween = Tween(globalSettingsUIScale, TweenInfo.new(0.2, Enum.EasingStyle.Exponential, Enum.EasingDirection.Out), {
            Scale = targetScale
        })
        tween:Play()
        if toggledSettings then
            globalSettings.Visible = true
        else
            tween.Completed:Wait()
            globalSettings.Visible = false
        end
    end
    globalSettingsButton.MouseButton1Click:Connect(toggleSettings)
    globalSettings.MouseEnter:Connect(function()
        hoveringSettings = true
    end)
    globalSettings.MouseLeave:Connect(function()
        hoveringSettings = false
    end)
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 and toggledSettings and not hoveringSettings then
            toggleSettings()
        end
    end)
    function WindowFunctions:GlobalSetting(Settings)
        hasGlobalSetting = true
        local GlobalSettingFunctions = {}
        local globalSetting = Instance.new("TextButton")
        globalSetting.Name = "GlobalSetting"
        globalSetting.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json")
        globalSetting.Text = ""
        globalSetting.BackgroundTransparency = 1
        globalSetting.BorderSizePixel = 0
        globalSetting.Size = UDim2.fromOffset(200, 30)
        local globalSettingUIPadding = Instance.new("UIPadding")
        globalSettingUIPadding.PaddingLeft = UDim.new(0, 15)
        globalSettingUIPadding.Parent = globalSetting
        local settingName = Instance.new("TextLabel")
        settingName.Name = "SettingName"
        settingName.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
        settingName.Text = Settings.Name
        settingName.RichText = true
        settingName.TextColor3 = Color3.fromRGB(255, 255, 255)
        settingName.TextSize = 13
        settingName.TextTransparency = 0.5
        settingName.TextTruncate = Enum.TextTruncate.SplitWord
        settingName.TextXAlignment = Enum.TextXAlignment.Left
        settingName.TextYAlignment = Enum.TextYAlignment.Top
        settingName.AnchorPoint = Vector2.new(0, 0.5)
        settingName.AutomaticSize = Enum.AutomaticSize.Y
        settingName.BackgroundTransparency = 1
        settingName.BorderSizePixel = 0
        settingName.Position = UDim2.fromScale(0, 0.5)
        settingName.Size = UDim2.new(1, -40, 0, 0)
        settingName.Parent = globalSetting
        local globalSettingUIListLayout = Instance.new("UIListLayout")
        globalSettingUIListLayout.Padding = UDim.new(0, 10)
        globalSettingUIListLayout.FillDirection = Enum.FillDirection.Horizontal
        globalSettingUIListLayout.VerticalAlignment = Enum.VerticalAlignment.Center
        globalSettingUIListLayout.Parent = globalSetting
        local checkmark = Instance.new("TextLabel")
        checkmark.Name = "Checkmark"
        checkmark.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
        checkmark.Text = "âœ“"
        checkmark.TextColor3 = Color3.fromRGB(255, 255, 255)
        checkmark.TextSize = 13
        checkmark.TextTransparency = 1
        checkmark.TextXAlignment = Enum.TextXAlignment.Left
        checkmark.TextYAlignment = Enum.TextYAlignment.Top
        checkmark.AnchorPoint = Vector2.new(0, 0.5)
        checkmark.AutomaticSize = Enum.AutomaticSize.Y
        checkmark.BackgroundTransparency = 1
        checkmark.BorderSizePixel = 0
        checkmark.LayoutOrder = -1
        checkmark.Position = UDim2.fromScale(0, 0.5)
        checkmark.Size = UDim2.fromOffset(-10, 0)
        checkmark.Parent = globalSetting
        globalSetting.Parent = globalSettings
        local tweenSettings = {
            duration = 0.2,
            easingStyle = Enum.EasingStyle.Quint,
            transparencyIn = 0.2,
            transparencyOut = 0.5,
            checkSizeIncrease = 12,
            checkSizeDecrease = -globalSettingUIListLayout.Padding.Offset,
        }
        local tweens = {
            checkIn = Tween(checkmark, TweenInfo.new(tweenSettings.duration, tweenSettings.easingStyle), {
                Size = UDim2.new(checkmark.Size.X.Scale, tweenSettings.checkSizeIncrease, checkmark.Size.Y.Scale, checkmark.Size.Y.Offset)
            }),
            checkOut = Tween(checkmark, TweenInfo.new(tweenSettings.duration, tweenSettings.easingStyle), {
                Size = UDim2.new(checkmark.Size.X.Scale, tweenSettings.checkSizeDecrease, checkmark.Size.Y.Scale, checkmark.Size.Y.Offset)
            }),
            nameIn = Tween(settingName, TweenInfo.new(tweenSettings.duration, tweenSettings.easingStyle), {
                TextTransparency = tweenSettings.transparencyIn
            }),
            nameOut = Tween(settingName, TweenInfo.new(tweenSettings.duration, tweenSettings.easingStyle), {
                TextTransparency = tweenSettings.transparencyOut
            })
        }
        local toggled = Settings.Default or false
        local function Toggle(State)
            if State then
                tweens.checkIn:Play()
                tweens.nameIn:Play()
                checkmark:GetPropertyChangedSignal("AbsoluteSize"):Connect(function()
                    if checkmark.AbsoluteSize.X > 0 then
                        checkmark.TextTransparency = 0
                    end
                end)
            else
                tweens.checkOut:Play()
                tweens.nameOut:Play()
                checkmark:GetPropertyChangedSignal("AbsoluteSize"):Connect(function()
                    if checkmark.AbsoluteSize.X <= 0 then
                        checkmark.TextTransparency = 1
                    end
                end)
            end
        end
        Toggle(toggled)
        globalSetting.MouseButton1Click:Connect(function()
            toggled = not toggled
            Toggle(toggled)
            task.spawn(function()
                if Settings.Callback then
                    Settings.Callback(toggled)
                end
            end)
        end)
        function GlobalSettingFunctions:UpdateName(NewName)
            settingName.Text = NewName
        end
        function GlobalSettingFunctions:UpdateState(NewState)
            toggled = NewState
            Toggle(NewState)
            task.spawn(function()
                if Settings.Callback then
                    Settings.Callback(NewState)
                end
            end)
        end
        return GlobalSettingFunctions
    end
    function WindowFunctions:TabGroup()
        local SectionFunctions = {}
        local tabGroup = Instance.new("Frame")
        tabGroup.Name = "Section"
        tabGroup.AutomaticSize = Enum.AutomaticSize.Y
        tabGroup.BackgroundTransparency = 1
        tabGroup.BorderSizePixel = 0
        tabGroup.Size = UDim2.fromScale(1, 0)
        local divider3 = Instance.new("Frame")
        divider3.Name = "Divider"
        divider3.AnchorPoint = Vector2.new(0.5, 1)
        divider3.BackgroundTransparency = 0.9
        divider3.BorderSizePixel = 0
        divider3.Position = UDim2.fromScale(0.5, 1)
        divider3.Size = UDim2.new(1, -21, 0, 1)
        divider3.Parent = tabGroup
        local sectionTabSwitchers = Instance.new("Frame")
        sectionTabSwitchers.Name = "SectionTabSwitchers"
        sectionTabSwitchers.BackgroundTransparency = 1
        sectionTabSwitchers.BorderSizePixel = 0
        sectionTabSwitchers.Size = UDim2.fromScale(1, 1)
        sectionTabSwitchers.Parent = tabGroup
        local uIListLayout1 = Instance.new("UIListLayout")
        uIListLayout1.Padding = UDim.new(0, 15)
        uIListLayout1.HorizontalAlignment = Enum.HorizontalAlignment.Center
        uIListLayout1.SortOrder = Enum.SortOrder.LayoutOrder
        uIListLayout1.Parent = sectionTabSwitchers
        local uIPadding1 = Instance.new("UIPadding")
        uIPadding1.PaddingBottom = UDim.new(0, 15)
        uIPadding1.Parent = sectionTabSwitchers
        tabGroup.Parent = tabSwitchersScrollingFrame
        function SectionFunctions:Tab(Settings)
            local TabFunctions = {}
            tabIndex += 1
            local tabSwitcher = Instance.new("TextButton")
            tabSwitcher.Name = "TabSwitcher"
            tabSwitcher.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json")
            tabSwitcher.Text = ""
            tabSwitcher.AutoButtonColor = false
            tabSwitcher.AnchorPoint = Vector2.new(0.5, 0)
            tabSwitcher.BackgroundTransparency = 1
            tabSwitcher.BorderSizePixel = 0
            tabSwitcher.Position = UDim2.fromScale(0.5, 0)
            tabSwitcher.Size = UDim2.new(1, -21, 0, 40)
            tabSwitcher.LayoutOrder = tabIndex
            local tabSwitcherUICorner = Instance.new("UICorner")
            tabSwitcherUICorner.Parent = tabSwitcher
            local tabSwitcherUIStroke = Instance.new("UIStroke")
            tabSwitcherUIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
            tabSwitcherUIStroke.Color = Color3.fromRGB(255, 255, 255)
            tabSwitcherUIStroke.Transparency = 1
            tabSwitcherUIStroke.Parent = tabSwitcher
            local tabSwitcherUIListLayout = Instance.new("UIListLayout")
            tabSwitcherUIListLayout.Padding = UDim.new(0, 9)
            tabSwitcherUIListLayout.FillDirection = Enum.FillDirection.Horizontal
            tabSwitcherUIListLayout.VerticalAlignment = Enum.VerticalAlignment.Center
            tabSwitcherUIListLayout.Parent = tabSwitcher
            if Settings.Image then
                local tabImage = Instance.new("ImageLabel")
                tabImage.Name = "TabImage"
                tabImage.Image = Settings.Image
                tabImage.ImageTransparency = 0.4
                tabImage.BackgroundTransparency = 1
                tabImage.BorderSizePixel = 0
                tabImage.Size = UDim2.fromOffset(16, 16)
                tabImage.Parent = tabSwitcher
            end
            local tabSwitcherName = Instance.new("TextLabel")
            tabSwitcherName.Name = "TabSwitcherName"
            tabSwitcherName.FontFace = Font.new(assets.interFont, Enum.FontWeight.SemiBold, Enum.FontStyle.Normal)
            tabSwitcherName.Text = Settings.Name
            tabSwitcherName.RichText = true
            tabSwitcherName.TextColor3 = StarLight.IsMobile and Color3.fromRGB(200, 200, 200) or Color3.fromRGB(255, 255, 255)
            tabSwitcherName.TextSize = StarLight.IsMobile and 17 or 16
            tabSwitcherName.TextTransparency = 0.4
            tabSwitcherName.TextTruncate = Enum.TextTruncate.SplitWord
            tabSwitcherName.TextXAlignment = Enum.TextXAlignment.Left
            tabSwitcherName.TextYAlignment = Enum.TextYAlignment.Top
            tabSwitcherName.AutomaticSize = Enum.AutomaticSize.Y
            tabSwitcherName.BackgroundTransparency = 1
            tabSwitcherName.BorderSizePixel = 0
            tabSwitcherName.LayoutOrder = 1
            tabSwitcherName.Size = UDim2.fromScale(1, 0)
            tabSwitcherName.Parent = tabSwitcher
            local tabSwitcherUIPadding = Instance.new("UIPadding")
            tabSwitcherUIPadding.PaddingLeft = UDim.new(0, 24)
            tabSwitcherUIPadding.PaddingRight = UDim.new(0, 35)
            tabSwitcherUIPadding.PaddingTop = UDim.new(0, 1)
            tabSwitcherUIPadding.Parent = tabSwitcher
            tabSwitcher.Parent = sectionTabSwitchers
            local elements1 = Instance.new("Frame")
            elements1.Name = "Elements"
            elements1.BackgroundTransparency = 1
            elements1.BorderSizePixel = 0
            elements1.Position = UDim2.fromOffset(0, 63)
            elements1.Size = UDim2.new(1, 0, 1, -63)
            elements1.Visible = false
            elements1.Parent = content
            local elementsUIPadding = Instance.new("UIPadding")
            elementsUIPadding.PaddingRight = UDim.new(0, 5)
            elementsUIPadding.PaddingTop = UDim.new(0, 10)
            elementsUIPadding.Parent = elements1
            local elementsScrolling = Instance.new("ScrollingFrame")
            elementsScrolling.Name = "ElementsScrolling"
            elementsScrolling.AutomaticCanvasSize = Enum.AutomaticSize.Y
            elementsScrolling.BottomImage = ""
            elementsScrolling.CanvasSize = UDim2.new()
            elementsScrolling.ScrollBarImageTransparency = 0.5
            elementsScrolling.ScrollBarThickness = StarLight.IsMobile and 3 or 1
            elementsScrolling.TopImage = ""
            elementsScrolling.BackgroundTransparency = 1
            elementsScrolling.BorderSizePixel = 0
            elementsScrolling.Size = UDim2.fromScale(1, 1)
            elementsScrolling.Parent = elements1
            local elementsScrollingUIPadding = Instance.new("UIPadding")
            elementsScrollingUIPadding.PaddingBottom = UDim.new(0, 15)
            elementsScrollingUIPadding.PaddingLeft = UDim.new(0, 11)
            elementsScrollingUIPadding.PaddingRight = UDim.new(0, 3)
            elementsScrollingUIPadding.PaddingTop = UDim.new(0, 5)
            elementsScrollingUIPadding.Parent = elementsScrolling
            local elementsScrollingUIListLayout = Instance.new("UIListLayout")
            elementsScrollingUIListLayout.Padding = UDim.new(0, 15)
            elementsScrollingUIListLayout.FillDirection = Enum.FillDirection.Horizontal
            elementsScrollingUIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
            elementsScrollingUIListLayout.Parent = elementsScrolling
            local left = Instance.new("Frame")
            left.Name = "Left"
            left.AutomaticSize = Enum.AutomaticSize.Y
            left.BackgroundTransparency = 1
            left.BorderSizePixel = 0
            left.Position = UDim2.fromScale(0.512, 0)
            left.Size = UDim2.new(0.5, -10, 0, 0)
            left.Parent = elementsScrolling
            local leftUIListLayout = Instance.new("UIListLayout")
            leftUIListLayout.Padding = UDim.new(0, 15)
            leftUIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
            leftUIListLayout.Parent = left
            local right = Instance.new("Frame")
            right.Name = "Right"
            right.AutomaticSize = Enum.AutomaticSize.Y
            right.BackgroundTransparency = 1
            right.BorderSizePixel = 0
            right.LayoutOrder = 1
            right.Position = UDim2.fromScale(0.512, 0)
            right.Size = UDim2.new(0.5, -10, 0, 0)
            right.Parent = elementsScrolling
            local rightUIListLayout = Instance.new("UIListLayout")
            rightUIListLayout.Padding = UDim.new(0, 15)
            rightUIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
            rightUIListLayout.Parent = right
            local isSelected = false
            local function selectTab()
                if isSelected then return end
                isSelected = true
                for _, tab in pairs(tabs) do
                    if tab ~= TabFunctions and tab.Deselect then
                        tab:Deselect()
                    end
                end
                elements1.Visible = true
                Tween(tabSwitcherUIStroke, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {
                    Transparency = 0.7
                }):Play()
                Tween(tabSwitcherName, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {
                    TextTransparency = 0
                }):Play()
                if tabSwitcher:FindFirstChild("TabImage") then
                    Tween(tabSwitcher.TabImage, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {
                        ImageTransparency = 0.2
                    }):Play()
                end
                currentTab.Text = Settings.Name
            end
            local function deselectTab()
                if not isSelected then return end
                isSelected = false
                elements1.Visible = false
                Tween(tabSwitcherUIStroke, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {
                    Transparency = 1
                }):Play()
                Tween(tabSwitcherName, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {
                    TextTransparency = 0.4
                }):Play()
                if tabSwitcher:FindFirstChild("TabImage") then
                    Tween(tabSwitcher.TabImage, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {
                        ImageTransparency = 0.4
                    }):Play()
                end
            end
            tabSwitcher.MouseButton1Click:Connect(selectTab)
            if StarLight.IsTouch then
                tabSwitcher.TouchTap:Connect(selectTab)
            end
            if tabIndex == 1 then
                selectTab()
            end
            function TabFunctions:Section(Settings)
                local SectionFunctions = {}
                local section = Instance.new("Frame")
                section.Name = "Section"
                section.AutomaticSize = Enum.AutomaticSize.Y
                section.BackgroundTransparency = 0.98
                section.BorderSizePixel = 0
                section.Position = UDim2.fromScale(0, 6.78e-08)
                section.Size = UDim2.fromScale(1, 0)
                section.Parent = Settings.Side == "Left" and left or right
                local sectionUICorner = Instance.new("UICorner")
                sectionUICorner.Parent = section
                local sectionUIStroke = Instance.new("UIStroke")
                sectionUIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                sectionUIStroke.Color = Color3.fromRGB(255, 255, 255)
                sectionUIStroke.Transparency = 0.95
                sectionUIStroke.Parent = section
                local sectionUIListLayout = Instance.new("UIListLayout")
                sectionUIListLayout.Padding = UDim.new(0, 10)
                sectionUIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
                sectionUIListLayout.Parent = section
                local sectionUIPadding = Instance.new("UIPadding")
                sectionUIPadding.PaddingBottom = UDim.new(0, 20)
                sectionUIPadding.PaddingLeft = UDim.new(0, 20)
                sectionUIPadding.PaddingRight = UDim.new(0, 18)
                sectionUIPadding.PaddingTop = UDim.new(0, 22)
                sectionUIPadding.Parent = section
                function SectionFunctions:Button(Settings)
                    local ButtonFunctions = {}
                    local button = Instance.new("Frame")
                    button.Name = "Button"
                    button.AutomaticSize = Enum.AutomaticSize.Y
                    button.BackgroundTransparency = 1
                    button.BorderSizePixel = 0
                    button.Size = UDim2.new(1, 0, 0, 38)
                    button.Parent = section
                    local buttonInteract = Instance.new("TextButton")
                    buttonInteract.Name = "ButtonInteract"
                    buttonInteract.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
                    buttonInteract.RichText = true
                    buttonInteract.Text = Settings.Name
                    buttonInteract.TextColor3 = Color3.fromRGB(255, 255, 255)
                    buttonInteract.TextSize = 13
                    buttonInteract.TextTransparency = Settings.Disabled and 0.7 or 0.5
                    buttonInteract.TextTruncate = Enum.TextTruncate.AtEnd
                    buttonInteract.TextXAlignment = Enum.TextXAlignment.Left
                    buttonInteract.BackgroundTransparency = 1
                    buttonInteract.BorderSizePixel = 0
                    buttonInteract.Size = UDim2.fromScale(1, 1)
                    buttonInteract.Active = not Settings.Disabled
                    buttonInteract.Parent = button
                    local buttonImage = Instance.new("ImageLabel")
                    buttonImage.Name = "ButtonImage"
                    buttonImage.Image = assets.buttonImage
                    buttonImage.ImageTransparency = Settings.Disabled and 0.7 or 0.5
                    buttonImage.AnchorPoint = Vector2.new(1, 0.5)
                    buttonImage.BackgroundTransparency = 1
                    buttonImage.BorderSizePixel = 0
                    buttonImage.Position = UDim2.fromScale(1, 0.5)
                    buttonImage.Size = UDim2.fromOffset(15, 15)
                    buttonImage.Parent = button
                    local TweenSettings = {
                        DefaultTransparency = Settings.Disabled and 0.7 or 0.5,
                        HoverTransparency = Settings.Disabled and 0.7 or 0.3,
                        EasingStyle = Enum.EasingStyle.Sine
                    }
                    local function ChangeState(State)
                        if Settings.Disabled then return end
                        if State == "Idle" then
                            Tween(buttonInteract, TweenInfo.new(0.2, TweenSettings.EasingStyle), {
                                TextTransparency = TweenSettings.DefaultTransparency
                            }):Play()
                            Tween(buttonImage, TweenInfo.new(0.2, TweenSettings.EasingStyle), {
                                ImageTransparency = TweenSettings.DefaultTransparency
                            }):Play()
                        elseif State == "Hover" then
                            Tween(buttonInteract, TweenInfo.new(0.2, TweenSettings.EasingStyle), {
                                TextTransparency = TweenSettings.HoverTransparency
                            }):Play()
                            Tween(buttonImage, TweenInfo.new(0.2, TweenSettings.EasingStyle), {
                                ImageTransparency = TweenSettings.HoverTransparency
                            }):Play()
                        end
                    end
                    local function Callback()
                        if Settings.Disabled then return end
                        if Settings.Callback then
                            Settings.Callback()
                        end
                    end
                    buttonInteract.MouseEnter:Connect(function()
                        ChangeState("Hover")
                    end)
                    buttonInteract.MouseLeave:Connect(function()
                        ChangeState("Idle")
                    end)
                    buttonInteract.MouseButton1Click:Connect(Callback)
                    if StarLight.IsTouch then
                        buttonInteract.TouchTap:Connect(Callback)
                    end
                    function ButtonFunctions:UpdateName(Name)
                        buttonInteract.Text = Name
                    end
                    function ButtonFunctions:SetVisibility(State)
                        button.Visible = State
                    end
                    function ButtonFunctions:SetDisabled(State)
                        Settings.Disabled = State
                        buttonInteract.Active = not State
                        TweenSettings.DefaultTransparency = State and 0.7 or 0.5
                        TweenSettings.HoverTransparency = State and 0.7 or 0.3
                        ChangeState("Idle")
                    end
                    return ButtonFunctions
                end
                function SectionFunctions:Toggle(Settings)
                    local ToggleFunctions = {}
                    local toggle = Instance.new("Frame")
                    toggle.Name = "Toggle"
                    toggle.AutomaticSize = Enum.AutomaticSize.Y
                    toggle.BackgroundTransparency = 1
                    toggle.BorderSizePixel = 0
                    toggle.Size = UDim2.new(1, 0, 0, 38)
                    toggle.Parent = section
                    local toggleName = Instance.new("TextLabel")
                    toggleName.Name = "ToggleName"
                    toggleName.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
                    toggleName.Text = Settings.Name
                    toggleName.RichText = true
                    toggleName.TextColor3 = Color3.fromRGB(255, 255, 255)
                    toggleName.TextSize = 13
                    toggleName.TextTransparency = Settings.Disabled and 0.7 or 0.5
                    toggleName.TextTruncate = Enum.TextTruncate.AtEnd
                    toggleName.TextXAlignment = Enum.TextXAlignment.Left
                    toggleName.TextYAlignment = Enum.TextYAlignment.Top
                    toggleName.AnchorPoint = Vector2.new(0, 0.5)
                    toggleName.AutomaticSize = Enum.AutomaticSize.Y
                    toggleName.BackgroundTransparency = 1
                    toggleName.BorderSizePixel = 0
                    toggleName.Position = UDim2.fromScale(0, 0.5)
                    toggleName.Size = UDim2.new(1, -50, 0, 0)
                    toggleName.Parent = toggle
                    local toggleButton = Instance.new("ImageButton")
                    toggleButton.Name = "Toggle"
                    toggleButton.Image = assets.toggleBackground
                    toggleButton.ImageColor3 = Color3.fromRGB(61, 61, 61)
                    toggleButton.AutoButtonColor = false
                    toggleButton.AnchorPoint = Vector2.new(1, 0.5)
                    toggleButton.BackgroundTransparency = 1
                    toggleButton.BorderSizePixel = 0
                    toggleButton.Position = UDim2.fromScale(1, 0.5)
                    toggleButton.Size = UDim2.fromOffset(41, 21)
                    toggleButton.Active = not Settings.Disabled
                    toggleButton.Parent = toggle
                    local toggleUIPadding = Instance.new("UIPadding")
                    toggleUIPadding.PaddingBottom = UDim.new(0, 1)
                    toggleUIPadding.PaddingLeft = UDim.new(0, -2)
                    toggleUIPadding.PaddingRight = UDim.new(0, 3)
                    toggleUIPadding.PaddingTop = UDim.new(0, 1)
                    toggleUIPadding.Parent = toggleButton
                    local togglerHead = Instance.new("ImageLabel")
                    togglerHead.Name = "TogglerHead"
                    togglerHead.Image = assets.togglerHead
                    togglerHead.ImageColor3 = Color3.fromRGB(91, 91, 91)
                    togglerHead.AnchorPoint = Vector2.new(1, 0.5)
                    togglerHead.BackgroundTransparency = 1
                    togglerHead.BorderSizePixel = 0
                    togglerHead.Position = UDim2.new(0.5, 0, 0.5, 0)
                    togglerHead.Size = UDim2.fromOffset(15, 15)
                    togglerHead.ZIndex = 2
                    togglerHead.Parent = toggleButton
                    local TweenSettings = {
                        Info = TweenInfo.new(0.2, Enum.EasingStyle.Sine),
                        EnabledColors = {
                            Toggle = Color3.fromRGB(87, 86, 86),
                            ToggleHead = Color3.fromRGB(255, 255, 255)
                        },
                        DisabledColors = {
                            Toggle = Color3.fromRGB(61, 61, 61),
                            ToggleHead = Color3.fromRGB(91, 91, 91)
                        },
                        EnabledPosition = UDim2.new(1, 0, 0.5, 0),
                        DisabledPosition = UDim2.new(0.5, 0, 0.5, 0),
                    }
                    local function ToggleState(State)
                        if State then
                            Tween(toggleButton, TweenSettings.Info, {
                                ImageColor3 = TweenSettings.EnabledColors.Toggle
                            }):Play()
                            Tween(togglerHead, TweenSettings.Info, {
                                ImageColor3 = TweenSettings.EnabledColors.ToggleHead
                            }):Play()
                            Tween(togglerHead, TweenSettings.Info, {
                                Position = TweenSettings.EnabledPosition
                            }):Play()
                        else
                            Tween(toggleButton, TweenSettings.Info, {
                                ImageColor3 = TweenSettings.DisabledColors.Toggle
                            }):Play()
                            Tween(togglerHead, TweenSettings.Info, {
                                ImageColor3 = TweenSettings.DisabledColors.ToggleHead
                            }):Play()
                            Tween(togglerHead, TweenSettings.Info, {
                                Position = TweenSettings.DisabledPosition
                            }):Play()
                        end
                        ToggleFunctions.State = State
                    end
                    local toggleState = Settings.Default or false
                    ToggleState(toggleState)
                    local function Toggle()
                        if Settings.Disabled then return end
                        toggleState = not toggleState
                        ToggleState(toggleState)
                        if Settings.Callback then
                            Settings.Callback(toggleState)
                        end
                    end
                    toggleButton.MouseButton1Click:Connect(Toggle)
                    if StarLight.IsTouch then
                        toggleButton.TouchTap:Connect(Toggle)
                    end
                    function ToggleFunctions:Toggle()
                        Toggle()
                    end
                    function ToggleFunctions:UpdateState(State)
                        toggleState = State
                        ToggleState(State)
                        if Settings.Callback then
                            Settings.Callback(State)
                        end
                    end
                    function ToggleFunctions:GetState()
                        return toggleState
                    end
                    function ToggleFunctions:UpdateName(Name)
                        toggleName.Text = Name
                    end
                    function ToggleFunctions:SetVisibility(State)
                        toggle.Visible = State
                    end
                    function ToggleFunctions:SetDisabled(State)
                        Settings.Disabled = State
                        toggleButton.Active = not State
                        toggleName.TextTransparency = State and 0.7 or 0.5
                    end
                    return ToggleFunctions
                end
                function SectionFunctions:Slider(Settings)
                    local SliderFunctions = {}
                    local slider = Instance.new("Frame")
                    slider.Name = "Slider"
                    slider.AutomaticSize = Enum.AutomaticSize.Y
                    slider.BackgroundTransparency = 1
                    slider.BorderSizePixel = 0
                    slider.Size = UDim2.new(1, 0, 0, 38)
                    slider.Parent = section
                    local sliderName = Instance.new("TextLabel")
                    sliderName.Name = "SliderName"
                    sliderName.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
                    sliderName.Text = Settings.Name
                    sliderName.RichText = true
                    sliderName.TextColor3 = Color3.fromRGB(255, 255, 255)
                    sliderName.TextSize = 13
                    sliderName.TextTransparency = Settings.Disabled and 0.7 or 0.5
                    sliderName.TextTruncate = Enum.TextTruncate.AtEnd
                    sliderName.TextXAlignment = Enum.TextXAlignment.Left
                    sliderName.TextYAlignment = Enum.TextYAlignment.Top
                    sliderName.AnchorPoint = Vector2.new(0, 0.5)
                    sliderName.AutomaticSize = Enum.AutomaticSize.XY
                    sliderName.BackgroundTransparency = 1
                    sliderName.BorderSizePixel = 0
                    sliderName.Position = UDim2.fromScale(0, 0.5)
                    sliderName.Parent = slider
                    local sliderElements = Instance.new("Frame")
                    sliderElements.Name = "SliderElements"
                    sliderElements.AnchorPoint = Vector2.new(1, 0)
                    sliderElements.BackgroundTransparency = 1
                    sliderElements.BorderSizePixel = 0
                    sliderElements.Position = UDim2.fromScale(1, 0)
                    sliderElements.Size = UDim2.fromScale(1, 1)
                    local sliderValue = Instance.new("TextBox")
                    sliderValue.Name = "SliderValue"
                    sliderValue.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
                    sliderValue.Text = "100%"
                    sliderValue.TextColor3 = Color3.fromRGB(255, 255, 255)
                    sliderValue.TextSize = 12
                    sliderValue.TextTransparency = Settings.Disabled and 0.7 or 0.4
                    sliderValue.TextTruncate = Enum.TextTruncate.AtEnd
                    sliderValue.BackgroundTransparency = 0.95
                    sliderValue.BorderSizePixel = 0
                    sliderValue.LayoutOrder = 1
                    sliderValue.Position = UDim2.fromScale(-0.0789, 0.171)
                    sliderValue.Size = UDim2.fromOffset(41, 21)
                    local sliderValueUICorner = Instance.new("UICorner")
                    sliderValueUICorner.CornerRadius = UDim.new(0, 4)
                    sliderValueUICorner.Parent = sliderValue
                    local sliderValueUIStroke = Instance.new("UIStroke")
                    sliderValueUIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                    sliderValueUIStroke.Color = Color3.fromRGB(255, 255, 255)
                    sliderValueUIStroke.Transparency = 0.9
                    sliderValueUIStroke.Parent = sliderValue
                    local sliderValueUIPadding = Instance.new("UIPadding")
                    sliderValueUIPadding.PaddingLeft = UDim.new(0, 2)
                    sliderValueUIPadding.PaddingRight = UDim.new(0, 2)
                    sliderValueUIPadding.Parent = sliderValue
                    sliderValue.Parent = sliderElements
                    local sliderElementsUIListLayout = Instance.new("UIListLayout")
                    sliderElementsUIListLayout.Padding = UDim.new(0, 20)
                    sliderElementsUIListLayout.FillDirection = Enum.FillDirection.Horizontal
                    sliderElementsUIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Right
                    sliderElementsUIListLayout.VerticalAlignment = Enum.VerticalAlignment.Center
                    sliderElementsUIListLayout.Parent = sliderElements
                    local sliderBar = Instance.new("ImageLabel")
                    sliderBar.Name = "SliderBar"
                    sliderBar.Image = assets.sliderBar
                    sliderBar.ImageColor3 = Color3.fromRGB(87, 86, 86)
                    sliderBar.BackgroundTransparency = 1
                    sliderBar.BorderSizePixel = 0
                    sliderBar.Position = UDim2.fromScale(0.219, 0.457)
                    sliderBar.Size = UDim2.fromOffset(123, 3)
                    local sliderHead = Instance.new("ImageButton")
                    sliderHead.Name = "SliderHead"
                    sliderHead.Image = assets.sliderHead
                    sliderHead.AnchorPoint = Vector2.new(0.5, 0.5)
                    sliderHead.BackgroundTransparency = 1
                    sliderHead.BorderSizePixel = 0
                    sliderHead.Position = UDim2.fromScale(1, 0.5)
                    sliderHead.Size = UDim2.fromOffset(12, 12)
                    sliderHead.Active = not Settings.Disabled
                    sliderHead.Parent = sliderBar
                    sliderBar.Parent = sliderElements
                    local sliderElementsUIPadding = Instance.new("UIPadding")
                    sliderElementsUIPadding.PaddingTop = UDim.new(0, 3)
                    sliderElementsUIPadding.Parent = sliderElements
                    sliderElements.Parent = slider
                    local isDragging = false
                    local currentValue = Settings.Default or Settings.Minimum
                    local DisplayMethods = {
                        Hundredths = function(v) return string.format("%.2f", v) end,
                        Tenths = function(v) return string.format("%.1f", v) end,
                        Round = function(v) return tostring(math.round(v)) end,
                        Degrees = function(v) return tostring(math.round(v)) .. "Â°" end,
                        Percent = function(v) 
                            local percentage = (v - Settings.Minimum) / (Settings.Maximum - Settings.Minimum) * 100
                            return tostring(math.round(percentage)) .. "%"
                        end,
                        Value = function(v) return tostring(v) end
                    }
                    local ValueDisplayMethod = DisplayMethods[Settings.DisplayMethod or "Value"]
                    local function SetValue(val, ignoreCallback)
                        local posXScale
                        if typeof(val) == "Instance" then
                            local input = val
                            posXScale = math.clamp((input.Position.X - sliderBar.AbsolutePosition.X) / sliderBar.AbsoluteSize.X, 0, 1)
                        else
                            local value = val
                            posXScale = (value - Settings.Minimum) / (Settings.Maximum - Settings.Minimum)
                        end
                        local pos = UDim2.new(posXScale, 0, 0.5, 0)
                        sliderHead.Position = pos
                        currentValue = posXScale * (Settings.Maximum - Settings.Minimum) + Settings.Minimum
                        sliderValue.Text = ValueDisplayMethod(currentValue)
                        SliderFunctions.Value = currentValue
                        if not ignoreCallback and Settings.Callback then
                            task.spawn(function()
                                Settings.Callback(currentValue)
                            end)
                        end
                    end
                    SetValue(Settings.Default or Settings.Minimum, true)
                    sliderHead.InputBegan:Connect(function(input)
                        if Settings.Disabled then return end
                        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                            isDragging = true
                            SetValue(input)
                        end
                    end)
                    sliderHead.InputEnded:Connect(function(input)
                        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                            isDragging = false
                        end
                    end)
                    sliderValue.FocusLost:Connect(function(enterPressed)
                        if enterPressed then
                            local inputText = sliderValue.Text
                            local value, isPercent = inputText:match("^(%-?%d+%.?%d*)(%%?)$")
                            if value then
                                value = tonumber(value)
                                isPercent = isPercent == "%"
                                if isPercent then
                                    value = Settings.Minimum + (value / 100) * (Settings.Maximum - Settings.Minimum)
                                end
                                local newValue = math.clamp(value, Settings.Minimum, Settings.Maximum)
                                SetValue(newValue)
                            else
                                sliderValue.Text = ValueDisplayMethod(currentValue)
                            end
                        end
                    end)
                    UserInputService.InputChanged:Connect(function(input)
                        if isDragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
                            SetValue(input)
                        end
                    end)
                    local function updateSliderBarSize()
                        local padding = sliderElementsUIListLayout.Padding.Offset
                        local sliderValueWidth = sliderValue.AbsoluteSize.X
                        local sliderNameWidth = sliderName.AbsoluteSize.X
                        local totalWidth = sliderElements.AbsoluteSize.X
                        local newBarWidth = math.max(50, totalWidth - (padding + sliderValueWidth + sliderNameWidth + 20))
                        sliderBar.Size = UDim2.new(sliderBar.Size.X.Scale, newBarWidth, sliderBar.Size.Y.Scale, sliderBar.Size.Y.Offset)
                    end
                    updateSliderBarSize()
                    sliderName:GetPropertyChangedSignal("AbsoluteSize"):Connect(updateSliderBarSize)
                    section:GetPropertyChangedSignal("AbsoluteSize"):Connect(updateSliderBarSize)
                    function SliderFunctions:UpdateName(Name)
                        sliderName.Text = Name
                    end
                    function SliderFunctions:SetVisibility(State)
                        slider.Visible = State
                    end
                    function SliderFunctions:UpdateValue(Value)
                        SetValue(Value)
                    end
                    function SliderFunctions:GetValue()
                        return currentValue
                    end
                    function SliderFunctions:SetDisabled(State)
                        Settings.Disabled = State
                        sliderHead.Active = not State
                        sliderName.TextTransparency = State and 0.7 or 0.5
                        sliderValue.TextTransparency = State and 0.7 or 0.4
                    end
                    return SliderFunctions
                end
                function SectionFunctions:Input(Settings)
                    local InputFunctions = {}
                    local input = Instance.new("Frame")
                    input.Name = "Input"
                    input.AutomaticSize = Enum.AutomaticSize.Y
                    input.BackgroundTransparency = 1
                    input.BorderSizePixel = 0
                    input.Size = UDim2.new(1, 0, 0, 38)
                    input.Parent = section
                    local inputName = Instance.new("TextLabel")
                    inputName.Name = "InputName"
                    inputName.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
                    inputName.Text = Settings.Name
                    inputName.RichText = true
                    inputName.TextColor3 = Color3.fromRGB(255, 255, 255)
                    inputName.TextSize = 13
                    inputName.TextTransparency = Settings.Disabled and 0.7 or 0.5
                    inputName.TextTruncate = Enum.TextTruncate.AtEnd
                    inputName.TextXAlignment = Enum.TextXAlignment.Left
                    inputName.TextYAlignment = Enum.TextYAlignment.Top
                    inputName.AnchorPoint = Vector2.new(0, 0.5)
                    inputName.AutomaticSize = Enum.AutomaticSize.XY
                    inputName.BackgroundTransparency = 1
                    inputName.BorderSizePixel = 0
                    inputName.Position = UDim2.fromScale(0, 0.5)
                    inputName.Parent = input
                    local inputBox = Instance.new("TextBox")
                    inputBox.Name = "InputBox"
                    inputBox.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
                    inputBox.Text = Settings.Default or ""
                    inputBox.TextColor3 = Color3.fromRGB(255, 255, 255)
                    inputBox.TextSize = 12
                    inputBox.TextTransparency = Settings.Disabled and 0.7 or 0.4
                    inputBox.AnchorPoint = Vector2.new(1, 0.5)
                    inputBox.AutomaticSize = Enum.AutomaticSize.X
                    inputBox.BackgroundTransparency = 0.95
                    inputBox.BorderSizePixel = 0
                    inputBox.ClipsDescendants = true
                    inputBox.LayoutOrder = 1
                    inputBox.Position = UDim2.fromScale(1, 0.5)
                    inputBox.Size = UDim2.fromOffset(21, 21)
                    inputBox.ClearTextOnFocus = false
                    inputBox.Active = not Settings.Disabled
                    inputBox.Parent = input
                    local inputBoxUICorner = Instance.new("UICorner")
                    inputBoxUICorner.CornerRadius = UDim.new(0, 4)
                    inputBoxUICorner.Parent = inputBox
                    local inputBoxUIStroke = Instance.new("UIStroke")
                    inputBoxUIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                    inputBoxUIStroke.Color = Color3.fromRGB(255, 255, 255)
                    inputBoxUIStroke.Transparency = 0.9
                    inputBoxUIStroke.Parent = inputBox
                    local inputBoxUIPadding = Instance.new("UIPadding")
                    inputBoxUIPadding.PaddingLeft = UDim.new(0, 5)
                    inputBoxUIPadding.PaddingRight = UDim.new(0, 5)
                    inputBoxUIPadding.Parent = inputBox
                    local inputBoxUISizeConstraint = Instance.new("UISizeConstraint")
                    inputBoxUISizeConstraint.Parent = inputBox
                    local CharacterSubs = {
                        All = function(value) return value end,
                        Numeric = function(value)
                            return value:match("^%-?%d*$") and value or value:gsub("[^%d-]", ""):gsub("(%-)", function(match, pos)
                                return pos == 1 and match or ""
                            end)
                        end,
                        Alphabetic = function(value) return value:gsub("[^a-zA-Z ]", "") end,
                    }
                    local AcceptedCharacters = CharacterSubs[Settings.AcceptedCharacters or "All"]
                    inputBox.AutomaticSize = Enum.AutomaticSize.X
                    local function checkSize()
                        local nameWidth = inputName.AbsoluteSize.X
                        local totalWidth = input.AbsoluteSize.X
                        local maxWidth = totalWidth - nameWidth - 20
                        inputBoxUISizeConstraint.MaxSize = Vector2.new(math.max(50, maxWidth), 9e9)
                    end
                    checkSize()
                    inputName:GetPropertyChangedSignal("AbsoluteSize"):Connect(checkSize)
                    section:GetPropertyChangedSignal("AbsoluteSize"):Connect(checkSize)
                    inputBox.FocusLost:Connect(function(enterPressed)
                        if enterPressed then
                            local inputText = inputBox.Text
                            local filteredText = AcceptedCharacters(inputText)
                            inputBox.Text = filteredText
                            InputFunctions.Text = filteredText
                            if Settings.Callback then
                                Settings.Callback(filteredText)
                            end
                        end
                    end)
                    inputBox:GetPropertyChangedSignal("Text"):Connect(function()
                        inputBox.Text = AcceptedCharacters(inputBox.Text)
                        InputFunctions.Text = inputBox.Text
                        if Settings.onChanged then
                            Settings.onChanged(inputBox.Text)
                        end
                    end)
                    if Settings.Placeholder then
                        inputBox.PlaceholderText = Settings.Placeholder
                    end
                    function InputFunctions:UpdateName(Name)
                        inputName.Text = Name
                    end
                    function InputFunctions:SetVisibility(State)
                        input.Visible = State
                    end
                    function InputFunctions:GetInput()
                        return inputBox.Text
                    end
                    function InputFunctions:UpdatePlaceholder(Placeholder)
                        inputBox.PlaceholderText = Placeholder
                    end
                    function InputFunctions:UpdateText(Text)
                        inputBox.Text = Text
                    end
                    function InputFunctions:SetDisabled(State)
                        Settings.Disabled = State
                        inputBox.Active = not State
                        inputName.TextTransparency = State and 0.7 or 0.5
                        inputBox.TextTransparency = State and 0.7 or 0.4
                    end
                    return InputFunctions
                end
                function SectionFunctions:Keybind(Settings)
                    local keyPicker = KeyPicker.new(Settings)
                    local KeybindFunctions = {}
                    local keybindFrame = keyPicker:CreateUI(section)
                    table.insert(StarLight.ActiveKeybinds or {}, keyPicker)
                    KeybindFunctions.Bind = function(Key) keyPicker:SetKeybind(Key) end
                    KeybindFunctions.Unbind = function() keyPicker:Unbind() end
                    KeybindFunctions.GetBind = function() return keyPicker.Keybind end
                    KeybindFunctions.UpdateName = function(Name) keyPicker.KeybindName.Text = Name end
                    KeybindFunctions.SetVisibility = function(State) keybindFrame.Visible = State end
                    KeybindFunctions.SetMode = function(Mode) keyPicker:SetMode(Mode) end
                    KeybindFunctions.GetState = function() return keyPicker:GetState() end
                    return KeybindFunctions
                end
                function SectionFunctions:Dropdown(Settings)
                    local DropdownFunctions = {}
                    local Selected = {}
                    local OptionObjs = {}
                    local dropdown = Instance.new("Frame")
                    dropdown.Name = "Dropdown"
                    dropdown.BackgroundTransparency = 0.985
                    dropdown.BorderSizePixel = 0
                    dropdown.Size = UDim2.new(1, 0, 0, 38)
                    dropdown.ClipsDescendants = true
                    dropdown.Parent = section
                    local dropdownUIPadding = Instance.new("UIPadding")
                    dropdownUIPadding.PaddingLeft = UDim.new(0, 15)
                    dropdownUIPadding.PaddingRight = UDim.new(0, 15)
                    dropdownUIPadding.Parent = dropdown
                    local interact = Instance.new("TextButton")
                    interact.Name = "Interact"
                    interact.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json")
                    interact.Text = ""
                    interact.BackgroundTransparency = 1
                    interact.BorderSizePixel = 0
                    interact.Size = UDim2.new(1, 0, 0, 38)
                    interact.Active = not Settings.Disabled
                    interact.Parent = dropdown
                    local dropdownName = Instance.new("TextLabel")
                    dropdownName.Name = "DropdownName"
                    dropdownName.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
                    dropdownName.Text = Settings.Name
                    dropdownName.RichText = true
                    dropdownName.TextColor3 = Color3.fromRGB(255, 255, 255)
                    dropdownName.TextSize = 13
                    dropdownName.TextTransparency = Settings.Disabled and 0.7 or 0.5
                    dropdownName.TextTruncate = Enum.TextTruncate.SplitWord
                    dropdownName.TextXAlignment = Enum.TextXAlignment.Left
                    dropdownName.AutomaticSize = Enum.AutomaticSize.Y
                    dropdownName.BackgroundTransparency = 1
                    dropdownName.BorderSizePixel = 0
                    dropdownName.Size = UDim2.new(1, -20, 0, 38)
                    dropdownName.Parent = dropdown
                    local dropdownUIStroke = Instance.new("UIStroke")
                    dropdownUIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                    dropdownUIStroke.Color = Color3.fromRGB(255, 255, 255)
                    dropdownUIStroke.Transparency = 0.95
                    dropdownUIStroke.Parent = dropdown
                    local dropdownUICorner = Instance.new("UICorner")
                    dropdownUICorner.CornerRadius = UDim.new(0, 6)
                    dropdownUICorner.Parent = dropdown
                    local dropdownImage = Instance.new("ImageLabel")
                    dropdownImage.Name = "DropdownImage"
                    dropdownImage.Image = assets.dropdownArrow
                    dropdownImage.ImageTransparency = Settings.Disabled and 0.7 or 0.5
                    dropdownImage.AnchorPoint = Vector2.new(1, 0)
                    dropdownImage.BackgroundTransparency = 1
                    dropdownImage.BorderSizePixel = 0
                    dropdownImage.Position = UDim2.new(1, 0, 0, 12)
                    dropdownImage.Size = UDim2.fromOffset(14, 14)
                    dropdownImage.Parent = dropdown
                    local dropdownFrame = Instance.new("Frame")
                    dropdownFrame.Name = "DropdownFrame"
                    dropdownFrame.BackgroundTransparency = 1
                    dropdownFrame.BorderSizePixel = 0
                    dropdownFrame.ClipsDescendants = true
                    dropdownFrame.Size = UDim2.fromScale(1, 1)
                    dropdownFrame.Visible = false
                    dropdownFrame.AutomaticSize = Enum.AutomaticSize.Y
                    dropdownFrame.Parent = dropdown
                    local dropdownFrameUIPadding = Instance.new("UIPadding")
                    dropdownFrameUIPadding.PaddingTop = UDim.new(0, 38)
                    dropdownFrameUIPadding.PaddingBottom = UDim.new(0, 10)
                    dropdownFrameUIPadding.Parent = dropdownFrame
                    local dropdownFrameUIListLayout = Instance.new("UIListLayout")
                    dropdownFrameUIListLayout.Padding = UDim.new(0, 5)
                    dropdownFrameUIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
                    dropdownFrameUIListLayout.Parent = dropdownFrame
                    local search = Instance.new("Frame")
                    search.Name = "Search"
                    search.BackgroundTransparency = 0.95
                    search.BorderSizePixel = 0
                    search.LayoutOrder = -1
                    search.Size = UDim2.new(1, 0, 0, 30)
                    search.Visible = Settings.Search or false
                    search.Parent = dropdownFrame
                    local searchUICorner = Instance.new("UICorner")
                    searchUICorner.Parent = search
                    local searchIcon = Instance.new("ImageLabel")
                    searchIcon.Name = "SearchIcon"
                    searchIcon.Image = assets.searchIcon
                    searchIcon.ImageColor3 = Color3.fromRGB(180, 180, 180)
                    searchIcon.AnchorPoint = Vector2.new(0, 0.5)
                    searchIcon.BackgroundTransparency = 1
                    searchIcon.BorderSizePixel = 0
                    searchIcon.Position = UDim2.fromScale(0, 0.5)
                    searchIcon.Size = UDim2.fromOffset(12, 12)
                    searchIcon.Parent = search
                    local searchUIPadding = Instance.new("UIPadding")
                    searchUIPadding.PaddingLeft = UDim.new(0, 15)
                    searchUIPadding.Parent = search
                    local searchBox = Instance.new("TextBox")
                    searchBox.Name = "SearchBox"
                    searchBox.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
                    searchBox.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
                    searchBox.PlaceholderText = "Search..."
                    searchBox.Text = ""
                    searchBox.TextColor3 = Color3.fromRGB(200, 200, 200)
                    searchBox.TextSize = 14
                    searchBox.TextXAlignment = Enum.TextXAlignment.Left
                    searchBox.BackgroundTransparency = 1
                    searchBox.BorderSizePixel = 0
                    searchBox.Size = UDim2.fromScale(1, 1)
                    local searchBoxUIPadding = Instance.new("UIPadding")
                    searchBoxUIPadding.PaddingLeft = UDim.new(0, 23)
                    searchBoxUIPadding.Parent = searchBox
                    searchBox.Parent = search
                    local function CalculateDropdownSize()
                        local totalHeight = 0
                        local visibleChildrenCount = 0
                        local padding = dropdownFrameUIPadding.PaddingTop.Offset + dropdownFrameUIPadding.PaddingBottom.Offset
                        for _, v in pairs(dropdownFrame:GetChildren()) do
                            if not v:IsA("UIComponent") and v.Visible then
                                totalHeight += v.AbsoluteSize.Y
                                visibleChildrenCount += 1
                            end
                        end
                        local spacing = dropdownFrameUIListLayout.Padding.Offset * (visibleChildrenCount - 1)
                        return totalHeight + spacing + padding
                    end
                    local function updateSearch()
                        local searchTerm = searchBox.Text:lower()
                        for _, v in pairs(OptionObjs) do
                            local optionText = v.NameLabel.Text:lower()
                            local isVisible = string.find(optionText, searchTerm) ~= nil
                            if v.Button.Visible ~= isVisible then
                                v.Button.Visible = isVisible
                            end
                        end
                        dropdown.Size = UDim2.new(1, 0, 0, CalculateDropdownSize())
                    end
                    searchBox:GetPropertyChangedSignal("Text"):Connect(updateSearch)
                    local isOpen = false
                    local isAnimating = false
                    local function ToggleDropdown()
                        if isAnimating or Settings.Disabled then return end
                        isAnimating = true
                        isOpen = not isOpen
                        local targetSize = isOpen and UDim2.new(1, 0, 0, CalculateDropdownSize()) or UDim2.new(1, 0, 0, 38)
                        local tween = Tween(dropdown, TweenInfo.new(0.2, Enum.EasingStyle.Exponential, Enum.EasingDirection.Out), {
                            Size = targetSize
                        })
                        tween:Play()
                        if isOpen then
                            dropdownFrame.Visible = true
                            Tween(dropdownImage, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {
                                Rotation = 180
                            }):Play()
                        else
                            Tween(dropdownImage, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {
                                Rotation = 0
                            }):Play()
                        end
                        tween.Completed:Connect(function()
                            if not isOpen then
                                dropdownFrame.Visible = false
                            end
                            isAnimating = false
                        end)
                    end
                    interact.MouseButton1Click:Connect(ToggleDropdown)
                    if StarLight.IsTouch then
                        interact.TouchTap:Connect(ToggleDropdown)
                    end
                    local function createOption(i, v)
                        local option = Instance.new("TextButton")
                        option.Name = "Option"
                        option.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json")
                        option.Text = ""
                        option.BackgroundTransparency = 1
                        option.BorderSizePixel = 0
                        option.Size = UDim2.new(1, 0, 0, 30)
                        option.Active = not Settings.Disabled
                        option.Parent = dropdownFrame
                        local optionUIPadding = Instance.new("UIPadding")
                        optionUIPadding.PaddingLeft = UDim.new(0, 15)
                        optionUIPadding.Parent = option
                        local optionName = Instance.new("TextLabel")
                        optionName.Name = "OptionName"
                        optionName.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
                        optionName.Text = v
                        optionName.RichText = true
                        optionName.TextColor3 = Color3.fromRGB(255, 255, 255)
                        optionName.TextSize = 13
                        optionName.TextTransparency = 0.5
                        optionName.TextTruncate = Enum.TextTruncate.AtEnd
                        optionName.TextXAlignment = Enum.TextXAlignment.Left
                        optionName.TextYAlignment = Enum.TextYAlignment.Top
                        optionName.AnchorPoint = Vector2.new(0, 0.5)
                        optionName.AutomaticSize = Enum.AutomaticSize.XY
                        optionName.BackgroundTransparency = 1
                        optionName.BorderSizePixel = 0
                        optionName.Position = UDim2.fromScale(0, 0.5)
                        optionName.Size = UDim2.fromScale(1, 0)
                        optionName.Parent = option
                        local optionUIListLayout = Instance.new("UIListLayout")
                        optionUIListLayout.Padding = UDim.new(0, 10)
                        optionUIListLayout.FillDirection = Enum.FillDirection.Horizontal
                        optionUIListLayout.VerticalAlignment = Enum.VerticalAlignment.Center
                        optionUIListLayout.Parent = option
                        local checkmark = Instance.new("TextLabel")
                        checkmark.Name = "Checkmark"
                        checkmark.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
                        checkmark.Text = "âœ“"
                        checkmark.TextColor3 = Color3.fromRGB(255, 255, 255)
                        checkmark.TextSize = 13
                        checkmark.TextTransparency = 1
                        checkmark.TextXAlignment = Enum.TextXAlignment.Left
                        checkmark.TextYAlignment = Enum.TextYAlignment.Top
                        checkmark.AnchorPoint = Vector2.new(0, 0.5)
                        checkmark.AutomaticSize = Enum.AutomaticSize.Y
                        checkmark.BackgroundTransparency = 1
                        checkmark.BorderSizePixel = 0
                        checkmark.LayoutOrder = -1
                        checkmark.Position = UDim2.fromScale(0, 0.5)
                        checkmark.Size = UDim2.fromOffset(-10, 0)
                        checkmark.Parent = option
                        OptionObjs[v] = {
                            Button = option,
                            NameLabel = optionName,
                            Checkmark = checkmark
                        }
                        return option
                    end
                    local function ToggleOption(optionName, State)
                        local optionData = OptionObjs[optionName]
                        if not optionData then return end
                        local checkmark = optionData.Checkmark
                        local nameLabel = optionData.NameLabel
                        local tweenSettings = {
                            duration = 0.2,
                            easingStyle = Enum.EasingStyle.Quint,
                            transparencyIn = 0.2,
                            transparencyOut = 0.5,
                            checkSizeIncrease = 12,
                            checkSizeDecrease = -10
                        }
                        if State then
                            if Settings.Multi then
                                if not table.find(Selected, optionName) then
                                    table.insert(Selected, optionName)
                                end
                            else
                                for name, opt in pairs(OptionObjs) do
                                    if name ~= optionName then
                                        Tween(opt.Checkmark, TweenInfo.new(tweenSettings.duration, tweenSettings.easingStyle), {
                                            Size = UDim2.new(opt.Checkmark.Size.X.Scale, tweenSettings.checkSizeDecrease, opt.Checkmark.Size.Y.Scale, opt.Checkmark.Size.Y.Offset)
                                        }):Play()
                                        Tween(opt.NameLabel, TweenInfo.new(tweenSettings.duration, tweenSettings.easingStyle), {
                                            TextTransparency = tweenSettings.transparencyOut
                                        }):Play()
                                        opt.Checkmark.TextTransparency = 1
                                    end
                                end
                                Selected = {optionName}
                            end
                            Tween(checkmark, TweenInfo.new(tweenSettings.duration, tweenSettings.easingStyle), {
                                Size = UDim2.new(checkmark.Size.X.Scale, tweenSettings.checkSizeIncrease, checkmark.Size.Y.Scale, checkmark.Size.Y.Offset)
                            }):Play()
                            Tween(nameLabel, TweenInfo.new(tweenSettings.duration, tweenSettings.easingStyle), {
                                TextTransparency = tweenSettings.transparencyIn
                            }):Play()
                            checkmark.TextTransparency = 0
                        else
                            if Settings.Multi then
                                local idx = table.find(Selected, optionName)
                                if idx then
                                    table.remove(Selected, idx)
                                end
                            else
                                Selected = {}
                            end
                            Tween(checkmark, TweenInfo.new(tweenSettings.duration, tweenSettings.easingStyle), {
                                Size = UDim2.new(checkmark.Size.X.Scale, tweenSettings.checkSizeDecrease, checkmark.Size.Y.Scale, checkmark.Size.Y.Offset)
                            }):Play()
                            Tween(nameLabel, TweenInfo.new(tweenSettings.duration, tweenSettings.easingStyle), {
                                TextTransparency = tweenSettings.transparencyOut
                            }):Play()
                            checkmark.TextTransparency = 1
                        end
                        if Settings.Required and #Selected == 0 and not State then
                            return
                        end
                        if #Selected > 0 then
                            dropdownName.Text = Settings.Name .. " â€¢ " .. table.concat(Selected, ", ")
                        else
                            dropdownName.Text = Settings.Name
                        end
                        DropdownFunctions.Value = Settings.Multi and Selected or Selected[1]
                    end
                    for i, v in ipairs(Settings.Values) do
                        local option = createOption(i, v)
                        local isSelected = false
                        if Settings.Default then
                            if Settings.Multi then
                                isSelected = table.find(Settings.Default, v) and true or false
                            else
                                isSelected = (Settings.Default == i) and true or false
                            end
                        end
                        ToggleOption(v, isSelected)
                        option.MouseButton1Click:Connect(function()
                            local isCurrentlySelected = table.find(Selected, v) and true or false
                            local newState = not isCurrentlySelected
                            if Settings.Required and not newState and #Selected <= 1 then
                                return
                            end
                            ToggleOption(v, newState)
                            if Settings.Callback then
                                task.spawn(function()
                                    if Settings.Multi then
                                        local result = {}
                                        for _, opt in ipairs(Selected) do
                                            result[opt] = true
                                        end
                                        Settings.Callback(result)
                                    else
                                        Settings.Callback(Selected[1] or nil)
                                    end
                                end)
                            end
                        end)
                    end
                    if Settings.DisabledValues then
                        for _, disabledValue in ipairs(Settings.DisabledValues) do
                            local optionData = OptionObjs[disabledValue]
                            if optionData then
                                optionData.Button.Active = false
                                optionData.NameLabel.TextTransparency = 0.8
                            end
                        end
                    end
                    function DropdownFunctions:UpdateName(Name)
                        dropdownName.Text = Name
                    end
                    function DropdownFunctions:SetVisibility(State)
                        dropdown.Visible = State
                    end
                    function DropdownFunctions:SetDisabled(State)
                        Settings.Disabled = State
                        interact.Active = not State
                        dropdownName.TextTransparency = State and 0.7 or 0.5
                        dropdownImage.ImageTransparency = State and 0.7 or 0.5
                    end
                    function DropdownFunctions:SetValues(Values)
                        for _, optionData in pairs(OptionObjs) do
                            optionData.Button:Destroy()
                        end
                        OptionObjs = {}
                        Selected = {}
                        for i, v in ipairs(Values) do
                            createOption(i, v)
                        end
                        dropdownName.Text = Settings.Name
                    end
                    return DropdownFunctions
                end
                function SectionFunctions:ColorPicker(Settings)
                    local ColorPickerFunctions = {}
                    local colorPicker = Instance.new("Frame")
                    colorPicker.Name = "ColorPicker"
                    colorPicker.AutomaticSize = Enum.AutomaticSize.Y
                    colorPicker.BackgroundTransparency = 1
                    colorPicker.BorderSizePixel = 0
                    colorPicker.Size = UDim2.new(1, 0, 0, 38)
                    colorPicker.Parent = section
                    local colorPickerName = Instance.new("TextLabel")
                    colorPickerName.Name = "ColorPickerName"
                    colorPickerName.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
                    colorPickerName.Text = Settings.Name
                    colorPickerName.RichText = true
                    colorPickerName.TextColor3 = Color3.fromRGB(255, 255, 255)
                    colorPickerName.TextSize = 13
                    colorPickerName.TextTransparency = Settings.Disabled and 0.7 or 0.5
                    colorPickerName.TextTruncate = Enum.TextTruncate.AtEnd
                    colorPickerName.TextXAlignment = Enum.TextXAlignment.Left
                    colorPickerName.TextYAlignment = Enum.TextYAlignment.Top
                    colorPickerName.AnchorPoint = Vector2.new(0, 0.5)
                    colorPickerName.AutomaticSize = Enum.AutomaticSize.XY
                    colorPickerName.BackgroundTransparency = 1
                    colorPickerName.BorderSizePixel = 0
                    colorPickerName.Position = UDim2.fromScale(0, 0.5)
                    colorPickerName.Parent = colorPicker
                    local colorDisplay = Instance.new("TextButton")
                    colorDisplay.Name = "ColorDisplay"
                    colorDisplay.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json")
                    colorDisplay.Text = ""
                    colorDisplay.AnchorPoint = Vector2.new(1, 0.5)
                    colorDisplay.BackgroundColor3 = Settings.Default or Color3.fromRGB(255, 255, 255)
                    colorDisplay.BorderSizePixel = 0
                    colorDisplay.Position = UDim2.fromScale(1, 0.5)
                    colorDisplay.Size = UDim2.fromOffset(21, 21)
                    colorDisplay.Active = not Settings.Disabled
                    colorDisplay.Parent = colorPicker
                    local colorDisplayUICorner = Instance.new("UICorner")
                    colorDisplayUICorner.CornerRadius = UDim.new(0, 4)
                    colorDisplayUICorner.Parent = colorDisplay
                    local colorDisplayUIStroke = Instance.new("UIStroke")
                    colorDisplayUIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                    colorDisplayUIStroke.Color = Color3.fromRGB(255, 255, 255)
                    colorDisplayUIStroke.Transparency = 0.9
                    colorDisplayUIStroke.Parent = colorDisplay
                    local contextMenu = ContextMenu.new()
                    contextMenu:AddItem("Copy HEX", function()
                        local r, g, b = math.floor(colorDisplay.BackgroundColor3.R * 255), math.floor(colorDisplay.BackgroundColor3.G * 255), math.floor(colorDisplay.BackgroundColor3.B * 255)
                        local hex = string.format("#%02X%02X%02X", r, g, b)
                        if setclipboard then setclipboard(hex) end
                    end)
                    contextMenu:AddItem("Copy RGB", function()
                        local r, g, b = math.floor(colorDisplay.BackgroundColor3.R * 255), math.floor(colorDisplay.BackgroundColor3.G * 255), math.floor(colorDisplay.BackgroundColor3.B * 255)
                        local rgb = string.format("%d, %d, %d", r, g, b)
                        if setclipboard then setclipboard(rgb) end
                    end)
                    contextMenu:AddItem("Paste color", function()
                        local success, color = pcall(function()
                            return Color3.fromRGB(255, 0, 0)
                        end)
                        if success and color then
                            colorDisplay.BackgroundColor3 = color
                            if Settings.Callback then
                                Settings.Callback(color)
                            end
                        end
                    end)
                    local currentColor = Settings.Default or Color3.fromRGB(255, 255, 255)
                    colorDisplay.InputBegan:Connect(function(input)
                        if input.UserInputType == Enum.UserInputType.MouseButton2 and not Settings.Disabled then
                            local mousePos = UserInputService:GetMouseLocation()
                            contextMenu:Show(mousePos)
                        end
                    end)
                    colorDisplay.MouseButton1Click:Connect(function()
                        if Settings.Disabled then return end
                        local newColor = Color3.fromRGB(math.random(0, 255), math.random(0, 255), math.random(0, 255))
                        colorDisplay.BackgroundColor3 = newColor
                        currentColor = newColor
                        if Settings.Callback then
                            Settings.Callback(newColor)
                        end
                    end)
                    function ColorPickerFunctions:UpdateName(Name)
                        colorPickerName.Text = Name
                    end
                    function ColorPickerFunctions:SetVisibility(State)
                        colorPicker.Visible = State
                    end
                    function ColorPickerFunctions:SetColor(Color)
                        colorDisplay.BackgroundColor3 = Color
                        currentColor = Color
                    end
                    function ColorPickerFunctions:GetColor()
                        return currentColor
                    end
                    function ColorPickerFunctions:SetDisabled(State)
                        Settings.Disabled = State
                        colorDisplay.Active = not State
                        colorPickerName.TextTransparency = State and 0.7 or 0.5
                    end
                    return ColorPickerFunctions
                end
                return SectionFunctions
            end
            TabFunctions.Select = selectTab
            TabFunctions.Deselect = deselectTab
            table.insert(tabs, TabFunctions)
            return TabFunctions
        end
        return SectionFunctions
    end
    if Settings.AcrylicBlur then
        local BlurTarget = base
        local depthOfField
        for _, v in pairs(Lighting:GetChildren()) do
            if v:IsA("DepthOfFieldEffect") and v:HasTag("StarLightBlur") then
                depthOfField = v
                break
            end
        end
        if not depthOfField then
            depthOfField = Instance.new('DepthOfFieldEffect', Lighting)
            depthOfField.FarIntensity = 0
            depthOfField.FocusDistance = 51.6
            depthOfField.InFocusRadius = 50
            depthOfField.NearIntensity = 1
            depthOfField:AddTag("StarLightBlur")
        end
        local blurFrame = Instance.new('Frame')
        blurFrame.Parent = BlurTarget
        blurFrame.Size = UDim2.new(0.97, 0, 0.97, 0)
        blurFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
        blurFrame.AnchorPoint = Vector2.new(0.5, 0.5)
        blurFrame.BackgroundTransparency = 1
        blurFrame.Name = HttpService:GenerateGUID(true)
        local parts = {}
        local function UpdateBlur()
            local isVisible = base.Visible and base.AbsoluteSize.X > 0 and base.AbsoluteSize.Y > 0
            depthOfField.Enabled = isVisible and Settings.AcrylicBlur
            if not isVisible or not Settings.AcrylicBlur then
                for _, pt in pairs(parts) do
                    pt.Parent = nil
                end
                return
            end
            local properties = {
                Transparency = 0.98,
                BrickColor = BrickColor.new('Institutional white'),
            }
            local tl, br = base.AbsolutePosition, base.AbsolutePosition + base.AbsoluteSize
            local tr, bl = Vector2.new(br.x, tl.y), Vector2.new(tl.x, br.y)
            local rot = 0
            local parent = base.Parent
            while parent and parent ~= game do
                if parent:IsA("GuiObject") then
                    rot += parent.Rotation
                end
                parent = parent.Parent
            end
            if rot ~= 0 and rot % 180 ~= 0 then
                local mid = tl:lerp(br, 0.5)
                local s, c = math.sin(math.rad(rot)), math.cos(math.rad(rot))
                tl = Vector2.new(c * (tl.x - mid.x) - s * (tl.y - mid.y), s * (tl.x - mid.x) + c * (tl.y - mid.y)) + mid
                tr = Vector2.new(c * (tr.x - mid.x) - s * (tr.y - mid.y), s * (tr.x - mid.x) + c * (tr.y - mid.y)) + mid
                bl = Vector2.new(c * (bl.x - mid.x) - s * (bl.y - mid.y), s * (bl.x - mid.x) + c * (bl.y - mid.y)) + mid
                br = Vector2.new(c * (br.x - mid.x) - s * (br.y - mid.y), s * (br.x - mid.x) + c * (br.y - mid.y)) + mid
            end
            local function DrawQuad(v1, v2, v3, v4)
                local partsNeeded = 4
                for i = #parts + 1, partsNeeded do
                    local p = Instance.new('Part')
                    p.FormFactor = 'Custom'
                    p.TopSurface = 0
                    p.BottomSurface = 0
                    p.Anchored = true
                    p.CanCollide = false
                    p.CastShadow = false
                    p.Material = Enum.Material.Glass
                    p.Size = Vector3.new(0.2, 0.2, 0.2)
                    p:AddTag("StarLightBlur")
                    local mesh = Instance.new('SpecialMesh', p)
                    mesh.MeshType = Enum.MeshType.Wedge
                    mesh.Name = wedgeguid
                    parts[i] = p
                end
                local function updateMesh(i, cf)
                    parts[i].CFrame = cf
                    parts[i][wedgeguid].Scale = Vector3.new(0, 0.2, 0.2)
                    parts[i].Parent = camera
                    for propName, propValue in pairs(properties) do
                        parts[i][propName] = propValue
                    end
                end
                local zIndex = 1 - 0.05 * base.ZIndex
                local p1 = camera:ScreenPointToRay(tl.x, tl.y, zIndex).Origin
                local p2 = camera:ScreenPointToRay(tr.x, tr.y, zIndex).Origin
                local p3 = camera:ScreenPointToRay(bl.x, bl.y, zIndex).Origin
                local p4 = camera:ScreenPointToRay(br.x, br.y, zIndex).Origin
                updateMesh(1, CFrame.new(p1))
                updateMesh(2, CFrame.new(p2))
                updateMesh(3, CFrame.new(p3))
                updateMesh(4, CFrame.new(p4))
            end
            DrawQuad(tl, tr, bl, br)
        end
        RunService.RenderStepped:Connect(UpdateBlur)
    end
    globalSettings.Parent = base
    base.Parent = starlightGui
    starlightGui.Destroying:Connect(function()
        if depthOfField then
            depthOfField:Destroy()
        end
        for _, part in pairs(parts) do
            part:Destroy()
        end
    end)
    return WindowFunctions
end

function StarLight:Notify(settings)
    local title = settings.Title or "Notification"
    local content = settings.Content or ""
    local duration = settings.Duration or 5
    local icon = settings.Icon or ""
    local notification = Instance.new("Frame")
    notification.Name = "Notification"
    notification.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    notification.BackgroundTransparency = 0.05
    notification.BorderSizePixel = 0
    notification.Size = UDim2.fromOffset(280, 60)
    notification.AutomaticSize = Enum.AutomaticSize.Y
    notification.Parent = notifications
    local stroke = Instance.new("UIStroke")
    stroke.Color = Color3.fromRGB(255, 255, 255)
    stroke.Transparency = 0.9
    stroke.Parent = notification
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 10)
    corner.Parent = notification
    local padding = Instance.new("UIPadding")
    padding.PaddingTop = UDim.new(0, 15)
    padding.PaddingBottom = UDim.new(0, 15)
    padding.PaddingLeft = UDim.new(0, 15)
    padding.PaddingRight = UDim.new(0, 15)
    padding.Parent = notification
    local layout = Instance.new("UIListLayout")
    layout.SortOrder = Enum.SortOrder.LayoutOrder
    layout.Padding = UDim.new(0, 5)
    layout.Parent = notification
    if icon ~= "" then
        local iconLabel = Instance.new("ImageLabel")
        iconLabel.Image = icon
        iconLabel.Size = UDim2.fromOffset(20, 20)
        iconLabel.BackgroundTransparency = 1
        iconLabel.LayoutOrder = 0
        iconLabel.Parent = notification
    end
    local titleLabel = Instance.new("TextLabel")
    titleLabel.FontFace = Font.new(assets.interFont, Enum.FontWeight.SemiBold, Enum.FontStyle.Normal)
    titleLabel.Text = title
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.TextSize = 14
    titleLabel.TextTransparency = 0.2
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.BackgroundTransparency = 1
    titleLabel.Size = UDim2.new(1, 0, 0, 20)
    titleLabel.LayoutOrder = 1
    titleLabel.Parent = notification
    local contentLabel = Instance.new("TextLabel")
    contentLabel.FontFace = Font.new(assets.interFont, Enum.FontWeight.Medium, Enum.FontStyle.Normal)
    contentLabel.Text = content
    contentLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    contentLabel.TextSize = 12
    contentLabel.TextTransparency = 0.4
    contentLabel.TextXAlignment = Enum.TextXAlignment.Left
    contentLabel.TextYAlignment = Enum.TextYAlignment.Top
    contentLabel.TextWrapped = true
    contentLabel.AutomaticSize = Enum.AutomaticSize.Y
    contentLabel.BackgroundTransparency = 1
    contentLabel.Size = UDim2.new(1, 0, 0, 0)
    contentLabel.LayoutOrder = 2
    contentLabel.Parent = notification
    notification.Size = UDim2.fromOffset(280, 0)
    notification.BackgroundTransparency = 1
    stroke.Transparency = 1
    Tween(notification, TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), {
        Size = notification.Size,
        BackgroundTransparency = 0.05
    }):Play()
    Tween(stroke, TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), {
        Transparency = 0.9
    }):Play()
    task.delay(duration, function()
        if notification.Parent then
            Tween(notification, TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.In), {
                Size = UDim2.fromOffset(280, 0),
                BackgroundTransparency = 1
            }):Play()
            Tween(stroke, TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.In), {
                Transparency = 1
            }):Play()
            task.wait(0.3)
            notification:Destroy()
        end
    end)
    return notification
end

function StarLight:SaveConfig(name, data)
    local json = HttpService:JSONEncode(data)
    if isfile and writefile then
        writefile(name .. ".starlight", json)
    end
end

function StarLight:LoadConfig(name)
    if isfile and readfile and isfile(name .. ".starlight") then
        local json = readfile(name .. ".starlight")
        local success, data = pcall(function()
            return HttpService:JSONDecode(json)
        end)
        if success then
            return data
        end
    end
    return nil
end

StarLight.Themes = {
    Dark = {
        Background = Color3.fromRGB(15, 15, 15),
        Surface = Color3.fromRGB(25, 25, 25),
        Primary = Color3.fromRGB(87, 86, 86),
        Text = Color3.fromRGB(255, 255, 255),
        TextDimmed = Color3.fromRGB(200, 200, 200),
        Stroke = Color3.fromRGB(255, 255, 255),
        Success = Color3.fromRGB(119, 174, 94),
        Warning = Color3.fromRGB(252, 190, 57),
        Error = Color3.fromRGB(250, 93, 86)
    },
    Light = {
        Background = Color3.fromRGB(240, 240, 240),
        Surface = Color3.fromRGB(220, 220, 220),
        Primary = Color3.fromRGB(180, 180, 180),
        Text = Color3.fromRGB(0, 0, 0),
        TextDimmed = Color3.fromRGB(50, 50, 50),
        Stroke = Color3.fromRGB(0, 0, 0),
        Success = Color3.fromRGB(100, 200, 100),
        Warning = Color3.fromRGB(255, 200, 50),
        Error = Color3.fromRGB(255, 100, 100)
    }
}

function StarLight:SetTheme(themeName)
    local theme = StarLight.Themes[themeName]
    if not theme then return end
    print(string.format("Theme '%s' applied", themeName))
end

StarLight.ActiveKeybinds = {}
StarLight.ActiveElements = {}

function StarLight:Unload()
    for _, keybind in ipairs(StarLight.ActiveKeybinds) do
        if keybind.Frame then
            keybind.Frame:Destroy()
        end
    end
    if notifications then
        notifications:ClearAllChildren()
    end
    for _, element in ipairs(StarLight.ActiveElements) do
        if element.ContextMenu then
            element.ContextMenu:Destroy()
        end
    end
    StarLight.ActiveKeybinds = {}
    StarLight.ActiveElements = {}
    print("âœ¨ StarLight UI Unloaded")
end

function StarLight:SetDPIScale(scale)
    for _, gui in ipairs(CoreGui:GetChildren()) do
        if gui:IsA("ScreenGui") and gui.Name == "StarLight" then
            local base = gui:FindFirstChild("Base")
            if base then
                local uiScale = base:FindFirstChild("BaseUIScale")
                if uiScale then
                    uiScale.Scale = scale
                end
            end
        end
    end
end

function StarLight:MakeResizable(windowFrame)
    local resizing = false
    local resizeHandle = Instance.new("ImageButton")
    resizeHandle.Name = "ResizeHandle"
    resizeHandle.Size = UDim2.fromOffset(20, 20)
    resizeHandle.Position = UDim2.fromScale(1, 1)
    resizeHandle.AnchorPoint = Vector2.new(1, 1)
    resizeHandle.BackgroundTransparency = 1
    resizeHandle.Image = "rbxassetid://10734900011"
    resizeHandle.ImageTransparency = 0.5
    resizeHandle.ZIndex = 100
    resizeHandle.Parent = windowFrame
    local startPos
    local startSize
    resizeHandle.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            resizing = true
            startPos = input.Position
            startSize = windowFrame.AbsoluteSize
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if resizing and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - startPos
            local newSize = startSize + Vector2.new(delta.X, delta.Y)
            newSize = Vector2.new(
                math.max(400, newSize.X),
                math.max(300, newSize.Y)
            )
            windowFrame.Size = UDim2.fromOffset(newSize.X, newSize.Y)
        end
    end)
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            resizing = false
        end
    end)
end

function StarLight:AutoSave(configName, elements, interval)
    interval = interval or 60
    local function saveAll()
        local data = {}
        for id, element in pairs(elements) do
            if element.GetState then
                data[id] = element:GetState()
            elseif element.GetValue then
                data[id] = element:GetValue()
            elseif element.GetInput then
                data[id] = element:GetInput()
            end
        end
        StarLight:SaveConfig(configName, data)
    end
    saveAll()
    local connection
    connection = RunService.Heartbeat:Connect(function()
        saveAll()
        task.wait(interval)
    end)
    return function()
        if connection then
            connection:Disconnect()
        end
        saveAll()
    end
end

StarLight.ContextMenu = ContextMenu
StarLight.KeyPicker = KeyPicker
StarLight.Version = "1.0.0"
StarLight.Build = "Enhanced"
StarLight.Creator = "Enhanced from MacLib by biggaboy212"

return StarLight